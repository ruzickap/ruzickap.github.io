<!doctype html><html lang="en" data-mode="dark"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.4.1" /><meta property="og:title" content="Setup production ready Kubernetes cluster using Kubespray and Vagrant running on the libvirt KVMs" /><meta name="author" content="Petr Ruzicka" /><meta property="og:locale" content="en" /><meta name="description" content="Setup production ready Kubernetes cluster using Kubespray and Vagrant running on the libvirt KVMs" /><meta property="og:description" content="Setup production ready Kubernetes cluster using Kubespray and Vagrant running on the libvirt KVMs" /><link rel="canonical" href="https://ruzickap.github.io/posts/setup-production-ready-kubernetes-cluster-using-kubespray-and-vagrant-running-on-the-libvirt-kvms/" /><meta property="og:url" content="https://ruzickap.github.io/posts/setup-production-ready-kubernetes-cluster-using-kubespray-and-vagrant-running-on-the-libvirt-kvms/" /><meta property="og:site_name" content="Petr’s Blog" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2017-11-02T00:00:00+01:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Setup production ready Kubernetes cluster using Kubespray and Vagrant running on the libvirt KVMs" /><meta name="twitter:site" content="@Ruzicka_Petr" /><meta name="twitter:creator" content="@Ruzicka_Petr" /><meta name="google-site-verification" content="4ugGShJoiB9veoPwFcMsMjzk-1BYbi5ozcSnovkBWtA" /><meta name="msvalidate.01" content="592AB158E3F9EF887F8DC8E69A2FF754" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Petr Ruzicka","url":"https://petr.ruzicka.dev"},"dateModified":"2026-01-17T19:48:44+01:00","datePublished":"2017-11-02T00:00:00+01:00","description":"Setup production ready Kubernetes cluster using Kubespray and Vagrant running on the libvirt KVMs","headline":"Setup production ready Kubernetes cluster using Kubespray and Vagrant running on the libvirt KVMs","mainEntityOfPage":{"@type":"WebPage","@id":"https://ruzickap.github.io/posts/setup-production-ready-kubernetes-cluster-using-kubespray-and-vagrant-running-on-the-libvirt-kvms/"},"url":"https://ruzickap.github.io/posts/setup-production-ready-kubernetes-cluster-using-kubespray-and-vagrant-running-on-the-libvirt-kvms/"}</script><title>Setup production ready Kubernetes cluster using Kubespray and Vagrant running on the libvirt KVMs | Petr's Blog</title><link rel="icon" type="image/png" href="/assets/img/favicons/favicon-96x96.png" sizes="96x96"><link rel="icon" type="image/svg+xml" href="/assets/img/favicons/favicon.svg"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="/assets/css/jekyll-theme-chirpy.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@7.1.0/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.36.4/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox@3.3.0/dist/css/glightbox.min.css"> <script src="/assets/js/dist/theme.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.umd.min.js,npm/glightbox@3.3.0/dist/js/glightbox.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.18/dayjs.min.js,npm/dayjs@1.11.18/locale/en.js,npm/dayjs@1.11.18/plugin/relativeTime.js,npm/dayjs@1.11.18/plugin/localizedFormat.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script> document.addEventListener('DOMContentLoaded', () => { const pv = document.getElementById('pageviews'); if (pv !== null) { const uri = location.pathname.replace(/\/$/, ''); const url = `https://ruzickap-github-io.goatcounter.com/counter/${encodeURIComponent(uri)}.json`; fetch(url) .then((response) => response.json()) .then((data) => { const count = data.count.replace(/\D/g, ''); pv.innerText = new Intl.NumberFormat().format(count); }) .catch((error) => { pv.innerText = '1'; }); } }); </script> <script defer src="/app.min.js?baseurl=&register=true" ></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-64WRCWDZM8"></script> <script> document.addEventListener('DOMContentLoaded', () => { window.dataLayer = window.dataLayer || []; function gtag() { dataLayer.push(arguments); } gtag('js', new Date()); gtag('config', 'G-64WRCWDZM8'); }); </script> <script async src="https://gc.zgo.at/count.js" data-goatcounter="https://ruzickap-github-io.goatcounter.com/count" ></script> <script defer src="https://cloud.umami.is/script.js" data-website-id="380ea41a-7d5f-4423-8e13-03151bde195f" ></script> <script defer src="https://static.cloudflareinsights.com/beacon.min.js" data-cf-beacon='{"token": "ad8c64404e1e41dba184019564cf11bb"}' ></script><body><aside aria-label="Sidebar" id="sidebar" class="d-flex flex-column align-items-end"><header class="profile-wrapper"> <a href="/" id="avatar" class="rounded-circle"><img src="https://0.gravatar.com/avatar/5484c0fd9f98e2ffd9212b158931bf4b?s=200" width="112" height="112" alt="avatar" onerror="this.style.display='none'"></a> <a class="site-title d-block" href="/">Petr's Blog</a><p class="site-subtitle fst-italic mb-0">DevOps • GitOps • K8s</p></header><nav class="flex-column flex-grow-1 w-100 ps-0"><ul class="nav"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/projects/" class="nav-link"> <i class="fa-fw fas fa-project-diagram"></i> <span>PROJECTS</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle"></i> <span>ABOUT</span> </a></ul></nav><div class="sidebar-bottom d-flex flex-wrap align-items-center w-100"> <a href="https://github.com/ruzickap" aria-label="github" target="_blank" rel="noopener noreferrer" > <i class="fab fa-github"></i> </a> <a href="javascript:location.href = 'mailto:' + ['petr.ruzicka','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="https://petr.ruzicka.dev" aria-label="homepage" target="_blank" rel="noopener noreferrer" > <i class="fas fa-home"></i> </a> <a href="https://mastodon.social/@petr_ruzicka" aria-label="mastodon" target="_blank" rel="noopener noreferrer me" > <i class="fab fa-mastodon"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></aside><div id="main-wrapper" class="d-flex justify-content-center"><div class="container d-flex flex-column px-xxl-5"><header id="topbar-wrapper" class="flex-shrink-0" aria-label="Top Bar"><div id="topbar" class="d-flex align-items-center justify-content-between px-lg-3 h-100" ><nav id="breadcrumb" aria-label="Breadcrumb"> <span> <a href="/">Home</a> </span> <span>Setup production ready Kubernetes cluster using Kubespray and Vagrant running on the libvirt KVMs</span></nav><button type="button" id="sidebar-trigger" class="btn btn-link" aria-label="Sidebar"> <i class="fas fa-bars fa-fw"></i> </button><div id="topbar-title"> Post</div><button type="button" id="search-trigger" class="btn btn-link" aria-label="Search"> <i class="fas fa-search fa-fw"></i> </button> <search id="search" class="align-items-center ms-3 ms-lg-0"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..." > </search> <button type="button" class="btn btn-link text-decoration-none" id="search-cancel">Cancel</button></div></header><div class="row flex-grow-1"><main aria-label="Main Content" class="col-12 col-lg-11 col-xl-9 px-md-4"><article class="px-1" data-toc="false"><header><h1 data-toc-skip>Setup production ready Kubernetes cluster using Kubespray and Vagrant running on the libvirt KVMs</h1><p class="post-desc fw-light mb-4">Setup production ready Kubernetes cluster using Kubespray and Vagrant running on the libvirt KVMs</p><div class="post-meta text-muted"> <span> Posted <time data-ts="1509577200" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Nov 2, 2017 </time> </span> <span> Updated <time data-ts="1768675724" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Jan 17, 2026 </time> </span><div class="d-flex justify-content-between"> <span> By <em> <a href="https://petr.ruzicka.dev">Petr Ruzicka</a> </em> </span><div> <span> <em id="pageviews"> <i class="fas fa-spinner fa-spin small"></i> </em> views </span> <span class="readtime" data-bs-toggle="tooltip" data-bs-placement="bottom" title="2762 words" > <em>15 min</em> read</span></div></div></div></header><div class="content"><blockquote class="prompt-info"><p>Original post from <a href="https://linux.xvx.cz/2017/11/setup-production-ready-kubernetes.html">linux.xvx.cz</a></p></blockquote><p>If you are creating some Docker containers - sooner or later you will work with Kubernetes to automate deploying, scaling, and operating application containers. If you need to simply run Kubernetes, there is a project called <a href="https://github.com/kubernetes/minikube">Minikube</a> which can help you set up a single VM with Kubernetes. This is probably the best way to start with it.</p><p>Sometimes it’s handy to have “production ready” Kubernetes cluster running on your laptop containing multiple VMs (like in a real production environment) - that’s where you need to look around and search for another solution.</p><p>After trying a few tools I decided to use <a href="https://github.com/kubernetes-incubator/kubespray">Kubespray</a>. It’s a tool for deploying a production ready Kubernetes cluster on AWS, GCE, Azure, OpenStack or Baremetal.</p><p>I’m fine to create a few virtual machines (using <a href="https://www.vagrantup.com/">Vagrant</a>) on my laptop and install Kubernetes there.</p><p><a href="https://github.com/kubernetes/kubernetes/raw/master/logo/logo.png" class="popup img-link shimmer"><img src="https://github.com/kubernetes/kubernetes/raw/master/logo/logo.png" alt="Kubernetes logo" width="200" loading="lazy"></a></p><p>I’ll use 3 VMs, all 3 have etcd installed, all 3 are nodes (running pods), 2 of them run master components.</p><p>(you can use more VMs with more advanced setup: <a href="https://github.com/kubespray/kubespray-cli">https://github.com/kubespray/kubespray-cli</a>)</p><p>Let’s see how you can do it in Fedora 26 using Vagrant + libvirt + Kubespray + Kubespray-cli.</p><ul><li><p>Install Vagrant VMs + libvirt and the Vagrantfile template for building the VMs</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
</pre><td class="rouge-code"><pre><span class="c"># Install Vagrant libvirt plugin (with all the dependencies like qemu, libvirt, vagrant, ...)</span>
dnf <span class="nb">install</span> <span class="nt">-y</span> <span class="nt">-q</span> ansible git libvirt-client libvirt-nss python-netaddr python-virtualenv vagrant-libvirt
vagrant plugin <span class="nb">install </span>vagrant-libvirt

<span class="c"># Enable dns resolution of VMs taken from libvirt (https://lukas.zapletalovi.com/2017/10/definitive-solution-to-libvirt-guest-naming.html)</span>
<span class="nb">sed</span> <span class="nt">-i</span>.orig <span class="s1">'s/files dns myhostname/files libvirt libvirt_guest dns myhostname/'</span> /etc/nsswitch.conf

<span class="c"># Start the libvirt daemon</span>
service libvirtd start

<span class="c"># Create ssh key if it doesn't exist</span>
<span class="nb">test</span> <span class="nt">-f</span> ~/.ssh/id_rsa.pub <span class="o">||</span> ssh-keygen <span class="nt">-f</span> <span class="s2">"</span><span class="nv">$HOME</span><span class="s2">/.ssh/id_rsa"</span> <span class="nt">-N</span> <span class="s1">''</span>

<span class="c"># Create directory structure</span>
<span class="nb">mkdir</span> /var/tmp/kubernetes_cluster
<span class="nb">cd</span> /var/tmp/kubernetes_cluster <span class="o">||</span> <span class="nb">exit</span>

<span class="c"># Create Vagrantfile</span>
<span class="nb">cat</span> <span class="o">&gt;</span> Vagrantfile <span class="o">&lt;&lt;</span> <span class="no">EOF</span><span class="sh">
box_image = "peru/my_ubuntu-16.04-server-amd64"
node_count = 4
ssh_pub_key = File.readlines("#{Dir.home}/.ssh/id_rsa.pub").first.strip

Vagrant.configure(2) do |config|
  config.vm.synced_folder ".", "/vagrant", :disabled =&gt; true
  config.vm.box = box_image

  config.vm.provider :libvirt do |domain|
    domain.cpus = 2
    domain.memory = 2048
    domain.default_prefix = ''
  end

  (1..node_count).each do |i|
    config.vm.define "kube0#{i}" do |config|
      config.vm.hostname = "kube0#{i}"
    end
  end

  config.vm.provision 'shell', inline: "install -m 0700 -d /root/.ssh/; echo #{ssh_pub_key} &gt;&gt; /root/.ssh/authorized_keys; chmod 0600 /root/.ssh/authorized_keys"
  config.vm.provision 'shell', inline: "echo #{ssh_pub_key} &gt;&gt; /home/vagrant/.ssh/authorized_keys", privileged: false
end
</span><span class="no">EOF

</span><span class="c"># Create and start virtual machines</span>
vagrant up
</pre></table></code></div></div><li><p>Create Python’s Virtualenv for kubespray and start the Kubernetes cluster provisioning</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
</pre><td class="rouge-code"><pre><span class="c"># Create Virtual env for Kubespray and make it active</span>
virtualenv <span class="nt">--system-site-packages</span> kubespray_virtenv
<span class="c"># shellcheck source=/dev/null</span>
<span class="nb">source </span>kubespray_virtenv/bin/activate

<span class="c"># Install Ansible and Kubespray to virtualenv</span>
pip <span class="nb">install </span>kubespray

<span class="c"># Create kubespray config file</span>
<span class="nb">cat</span> <span class="o">&gt;</span> ~/.kubespray.yml <span class="o">&lt;&lt;</span> <span class="no">EOF</span><span class="sh">
kubespray_git_repo: "https://github.com/kubespray/kubespray.git"
kubespray_path: "</span><span class="nv">$PWD</span><span class="sh">/kubespray"
loglevel: "info"
</span><span class="no">EOF

</span><span class="c"># Prepare kubespray for deployment</span>
kubespray prepare <span class="nt">--assumeyes</span> <span class="nt">--path</span> <span class="s2">"</span><span class="nv">$PWD</span><span class="s2">/kubespray"</span> <span class="nt">--nodes</span> kubernetes_cluster_kube01 kubernetes_cluster_kube02 kubernetes_cluster_kube03 kubernetes_cluster_kube04

<span class="nb">cat</span> <span class="o">&gt;</span> kubespray/inventory/inventory.cfg <span class="o">&lt;&lt;</span> <span class="no">EOF</span><span class="sh">
[kube-master]
kube01
kube02

[all]
kube01
kube02
kube03
kube04

[k8s-cluster:children]
kube-node
kube-master

[kube-node]
kube01
kube02
kube03
kube04

[etcd]
kube01
kube02
kube03
</span><span class="no">EOF

</span><span class="c"># Set password for kube user</span>
<span class="nb">test</span> <span class="nt">-d</span> kubespray/credentials <span class="o">||</span> <span class="nb">mkdir </span>kubespray/credentials
<span class="nb">echo</span> <span class="s2">"kube123"</span> <span class="o">&gt;</span> kubespray/credentials/kube_user

<span class="c"># Deploy Kubernetes cluster</span>
kubespray deploy <span class="nt">--assumeyes</span> <span class="nt">--user</span> root <span class="nt">--apps</span> efk helm netchecker
</pre></table></code></div></div></ul><p>After the deployment is over you should be able to login to one of the master node and run + see something like:</p><div class="language-console highlighter-rouge"><div class="code-header"> <span data-label-text="Console"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
</pre><td class="rouge-code"><pre><span class="gp">root@kube01:~#</span><span class="w"> </span>kubectl get nodes
<span class="go">NAME      STATUS    ROLES         AGE       VERSION
kube01    Ready     master,node   7m        v1.8.3+coreos.0
kube02    Ready     master,node   7m        v1.8.3+coreos.0
kube03    Ready     node          7m        v1.8.3+coreos.0
kube04    Ready     node          7m        v1.8.3+coreos.0


</span><span class="gp">root@kube01:~#</span><span class="w"> </span>kubectl get componentstatuses
<span class="go">NAME                 STATUS    MESSAGE              ERROR
controller-manager   Healthy   ok
scheduler            Healthy   ok
etcd-0               Healthy   {"health": "true"}
etcd-1               Healthy   {"health": "true"}
etcd-2               Healthy   {"health": "true"}


</span><span class="gp">root@kube01:~#</span><span class="w"> </span>kubectl get daemonSets <span class="nt">--all-namespaces</span>
<span class="go">NAMESPACE     NAME                       DESIRED   CURRENT   READY     UP-TO-DATE   AVAILABLE   NODE SELECTOR   AGE
</span><span class="gp">default       netchecker-agent           4         4         4         4            4           &lt;none&gt;</span><span class="w">          </span>3m
<span class="gp">default       netchecker-agent-hostnet   4         4         4         4            4           &lt;none&gt;</span><span class="w">          </span>3m
<span class="gp">kube-system   calico-node                4         4         4         4            4           &lt;none&gt;</span><span class="w">          </span>5m
<span class="gp">kube-system   fluentd-es-v1.22           4         4         4         4            4           &lt;none&gt;</span><span class="w">          </span>3m
<span class="go">

</span><span class="gp">root@kube01:~#</span><span class="w"> </span>kubectl get deployments <span class="nt">--all-namespaces</span>
<span class="go">NAMESPACE     NAME                       DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE
default       netchecker-server          1         1         1            1           3m
kube-system   elasticsearch-logging-v1   2         2         2            2           3m
kube-system   kibana-logging             1         1         1            0           3m
kube-system   kube-dns                   2         2         2            2           4m
kube-system   kubedns-autoscaler         1         1         1            1           4m
kube-system   kubernetes-dashboard       1         1         1            1           3m
kube-system   tiller-deploy              1         1         1            1           2m


</span><span class="gp">root@kube01:~#</span><span class="w"> </span>kubectl get services <span class="nt">--all-namespaces</span>
<span class="go">NAMESPACE     NAME                    TYPE        CLUSTER-IP      EXTERNAL-IP   PORT(S)          AGE
</span><span class="gp">default       kubernetes              ClusterIP   10.233.0.1      &lt;none&gt;</span><span class="w">        </span>443/TCP          7m
<span class="gp">default       netchecker-service      NodePort    10.233.52.117   &lt;none&gt;</span><span class="w">        </span>8081:31081/TCP   3m
<span class="gp">kube-system   elasticsearch-logging   ClusterIP   10.233.50.47    &lt;none&gt;</span><span class="w">        </span>9200/TCP         3m
<span class="gp">kube-system   kibana-logging          ClusterIP   10.233.55.77    &lt;none&gt;</span><span class="w">        </span>5601/TCP         3m
<span class="gp">kube-system   kube-dns                ClusterIP   10.233.0.3      &lt;none&gt;</span><span class="w">        </span>53/UDP,53/TCP    4m
<span class="gp">kube-system   kubernetes-dashboard    ClusterIP   10.233.23.217   &lt;none&gt;</span><span class="w">        </span>80/TCP           3m
<span class="gp">kube-system   tiller-deploy           ClusterIP   10.233.2.129    &lt;none&gt;</span><span class="w">        </span>44134/TCP        2m
<span class="go">

</span><span class="gp">root@kube01:/home/vagrant#</span><span class="w"> </span>kubectl describe nodes
<span class="go">Name:               kube01
Roles:              master,node
Labels:             beta.kubernetes.io/arch=amd64
                    beta.kubernetes.io/os=linux
                    kubernetes.io/hostname=kube01
                    node-role.kubernetes.io/master=true
                    node-role.kubernetes.io/node=true
Annotations:        alpha.kubernetes.io/provided-node-ip=192.168.121.170
                    node.alpha.kubernetes.io/ttl=0
                    volumes.kubernetes.io/controller-managed-attach-detach=true
</span><span class="gp">Taints:             &lt;none&gt;</span><span class="w">
</span><span class="go">CreationTimestamp:  Fri, 01 Dec 2017 07:48:12 +0000
Conditions:
  Type             Status  LastHeartbeatTime                 LastTransitionTime                Reason                       Message
  ----             ------  -----------------                 ------------------                ------                       -------
  OutOfDisk        False   Fri, 01 Dec 2017 08:00:15 +0000   Fri, 01 Dec 2017 07:48:12 +0000   KubeletHasSufficientDisk     kubelet has sufficient disk space available
  MemoryPressure   False   Fri, 01 Dec 2017 08:00:15 +0000   Fri, 01 Dec 2017 07:48:12 +0000   KubeletHasSufficientMemory   kubelet has sufficient memory available
  DiskPressure     False   Fri, 01 Dec 2017 08:00:15 +0000   Fri, 01 Dec 2017 07:48:12 +0000   KubeletHasNoDiskPressure     kubelet has no disk pressure
  Ready            True    Fri, 01 Dec 2017 08:00:15 +0000   Fri, 01 Dec 2017 07:49:23 +0000   KubeletReady                 kubelet is posting ready status
Addresses:
  InternalIP:  192.168.121.170
  Hostname:    kube01
Capacity:
 cpu:     2
 memory:  2048056Ki
 pods:    110
Allocatable:
 cpu:     1800m
 memory:  1445656Ki
 pods:    110
System Info:
 Machine ID:                 b16219f793e6953e4cc3a6375a15800f
 System UUID:                6CF15F25-6F3A-4AE9-B1DA-417C5F7AEB4B
 Boot ID:                    e696a205-9686-42cf-b126-e127e1125e08
 Kernel Version:             4.4.0-101-generic
 OS Image:                   Ubuntu 16.04.3 LTS
 Operating System:           linux
 Architecture:               amd64
 Container Runtime Version:  docker://Unknown
 Kubelet Version:            v1.8.3+coreos.0
 Kube-Proxy Version:         v1.8.3+coreos.0
ExternalID:                  kube01
Non-terminated Pods:         (8 in total)
  Namespace                  Name                              CPU Requests  CPU Limits  Memory Requests  Memory Limits
  ---------                  ----                              ------------  ----------  ---------------  -------------
  default                    netchecker-agent-hostnet-5wzdd    15m (0%)      30m (1%)    64M (4%)         100M (6%)
  default                    netchecker-agent-zc2wv            15m (0%)      30m (1%)    64M (4%)         100M (6%)
  kube-system                calico-node-kmfz7                 150m (8%)     300m (16%)  64M (4%)         500M (33%)
  kube-system                fluentd-es-v1.22-zsh42            100m (5%)     0 (0%)      200Mi (14%)      200Mi (14%)
  kube-system                kube-apiserver-kube01             100m (5%)     800m (44%)  256M (17%)       2G (135%)
  kube-system                kube-controller-manager-kube01    100m (5%)     250m (13%)  100M (6%)        512M (34%)
  kube-system                kube-proxy-kube01                 150m (8%)     500m (27%)  64M (4%)         2G (135%)
  kube-system                kube-scheduler-kube01             80m (4%)      250m (13%)  170M (11%)       512M (34%)
Allocated resources:
  (Total limits may be over 100 percent, i.e., overcommitted.)
  CPU Requests  CPU Limits    Memory Requests  Memory Limits
  ------------  ----------    ---------------  -------------
  710m (39%)    2160m (120%)  991715200 (66%)  5933715200 (400%)
Events:
  Type    Reason                   Age                From             Message
  ----    ------                   ----               ----             -------
  Normal  NodeAllocatableEnforced  12m                kubelet, kube01  Updated Node Allocatable limit across pods
  Normal  NodeHasSufficientDisk    12m (x8 over 12m)  kubelet, kube01  Node kube01 status is now: NodeHasSufficientDisk
  Normal  NodeHasSufficientMemory  12m (x7 over 12m)  kubelet, kube01  Node kube01 status is now: NodeHasSufficientMemory
  Normal  NodeHasNoDiskPressure    12m (x8 over 12m)  kubelet, kube01  Node kube01 status is now: NodeHasNoDiskPressure


Name:               kube02
Roles:              master,node
Labels:             beta.kubernetes.io/arch=amd64
                    beta.kubernetes.io/os=linux
                    kubernetes.io/hostname=kube02
                    node-role.kubernetes.io/master=true
                    node-role.kubernetes.io/node=true
Annotations:        alpha.kubernetes.io/provided-node-ip=192.168.121.99
                    node.alpha.kubernetes.io/ttl=0
                    volumes.kubernetes.io/controller-managed-attach-detach=true
</span><span class="gp">Taints:             &lt;none&gt;</span><span class="w">
</span><span class="go">CreationTimestamp:  Fri, 01 Dec 2017 07:48:18 +0000
Conditions:
  Type             Status  LastHeartbeatTime                 LastTransitionTime                Reason                       Message
  ----             ------  -----------------                 ------------------                ------                       -------
  OutOfDisk        False   Fri, 01 Dec 2017 08:00:11 +0000   Fri, 01 Dec 2017 07:48:18 +0000   KubeletHasSufficientDisk     kubelet has sufficient disk space available
  MemoryPressure   False   Fri, 01 Dec 2017 08:00:11 +0000   Fri, 01 Dec 2017 07:48:18 +0000   KubeletHasSufficientMemory   kubelet has sufficient memory available
  DiskPressure     False   Fri, 01 Dec 2017 08:00:11 +0000   Fri, 01 Dec 2017 07:48:18 +0000   KubeletHasNoDiskPressure     kubelet has no disk pressure
  Ready            True    Fri, 01 Dec 2017 08:00:11 +0000   Fri, 01 Dec 2017 07:49:19 +0000   KubeletReady                 kubelet is posting ready status
Addresses:
  InternalIP:  192.168.121.99
  Hostname:    kube02
Capacity:
 cpu:     2
 memory:  2048056Ki
 pods:    110
Allocatable:
 cpu:     1800m
 memory:  1445656Ki
 pods:    110
System Info:
 Machine ID:                 b16219f793e6953e4cc3a6375a15800f
 System UUID:                1D8EF759-33F1-42B0-9F47-49877BCD971A
 Boot ID:                    c5de3f75-d7c6-4c01-8c98-24dad24e6e8a
 Kernel Version:             4.4.0-101-generic
 OS Image:                   Ubuntu 16.04.3 LTS
 Operating System:           linux
 Architecture:               amd64
 Container Runtime Version:  docker://Unknown
 Kubelet Version:            v1.8.3+coreos.0
 Kube-Proxy Version:         v1.8.3+coreos.0
ExternalID:                  kube02
Non-terminated Pods:         (8 in total)
  Namespace                  Name                              CPU Requests  CPU Limits  Memory Requests  Memory Limits
  ---------                  ----                              ------------  ----------  ---------------  -------------
  default                    netchecker-agent-hostnet-5ff9f    15m (0%)      30m (1%)    64M (4%)         100M (6%)
  default                    netchecker-agent-mdgnj            15m (0%)      30m (1%)    64M (4%)         100M (6%)
  kube-system                calico-node-rh9pp                 150m (8%)     300m (16%)  64M (4%)         500M (33%)
  kube-system                fluentd-es-v1.22-d7j4w            100m (5%)     0 (0%)      200Mi (14%)      200Mi (14%)
  kube-system                kube-apiserver-kube02             100m (5%)     800m (44%)  256M (17%)       2G (135%)
  kube-system                kube-controller-manager-kube02    100m (5%)     250m (13%)  100M (6%)        512M (34%)
  kube-system                kube-proxy-kube02                 150m (8%)     500m (27%)  64M (4%)         2G (135%)
  kube-system                kube-scheduler-kube02             80m (4%)      250m (13%)  170M (11%)       512M (34%)
Allocated resources:
  (Total limits may be over 100 percent, i.e., overcommitted.)
  CPU Requests  CPU Limits    Memory Requests  Memory Limits
  ------------  ----------    ---------------  -------------
  710m (39%)    2160m (120%)  991715200 (66%)  5933715200 (400%)
Events:
  Type    Reason                   Age                From             Message
  ----    ------                   ----               ----             -------
  Normal  Starting                 12m                kubelet, kube02  Starting kubelet.
  Normal  NodeAllocatableEnforced  12m                kubelet, kube02  Updated Node Allocatable limit across pods
  Normal  NodeHasSufficientDisk    12m (x8 over 12m)  kubelet, kube02  Node kube02 status is now: NodeHasSufficientDisk
  Normal  NodeHasSufficientMemory  12m (x8 over 12m)  kubelet, kube02  Node kube02 status is now: NodeHasSufficientMemory
  Normal  NodeHasNoDiskPressure    12m (x7 over 12m)  kubelet, kube02  Node kube02 status is now: NodeHasNoDiskPressure


Name:               kube03
Roles:              node
Labels:             beta.kubernetes.io/arch=amd64
                    beta.kubernetes.io/os=linux
                    kubernetes.io/hostname=kube03
                    node-role.kubernetes.io/node=true
Annotations:        alpha.kubernetes.io/provided-node-ip=192.168.121.183
                    node.alpha.kubernetes.io/ttl=0
                    volumes.kubernetes.io/controller-managed-attach-detach=true
</span><span class="gp">Taints:             &lt;none&gt;</span><span class="w">
</span><span class="go">CreationTimestamp:  Fri, 01 Dec 2017 07:48:18 +0000
Conditions:
  Type             Status  LastHeartbeatTime                 LastTransitionTime                Reason                       Message
  ----             ------  -----------------                 ------------------                ------                       -------
  OutOfDisk        False   Fri, 01 Dec 2017 08:00:15 +0000   Fri, 01 Dec 2017 07:48:18 +0000   KubeletHasSufficientDisk     kubelet has sufficient disk space available
  MemoryPressure   False   Fri, 01 Dec 2017 08:00:15 +0000   Fri, 01 Dec 2017 07:48:18 +0000   KubeletHasSufficientMemory   kubelet has sufficient memory available
  DiskPressure     False   Fri, 01 Dec 2017 08:00:15 +0000   Fri, 01 Dec 2017 07:48:18 +0000   KubeletHasNoDiskPressure     kubelet has no disk pressure
  Ready            True    Fri, 01 Dec 2017 08:00:15 +0000   Fri, 01 Dec 2017 07:49:20 +0000   KubeletReady                 kubelet is posting ready status
Addresses:
  InternalIP:  192.168.121.183
  Hostname:    kube03
Capacity:
 cpu:     2
 memory:  2048056Ki
 pods:    110
Allocatable:
 cpu:     1900m
 memory:  1695656Ki
 pods:    110
System Info:
 Machine ID:                 b16219f793e6953e4cc3a6375a15800f
 System UUID:                D77B14AC-6257-4B9F-A8B7-20870539CFC3
 Boot ID:                    7c6a422b-23d5-424a-b41a-76965bdd6e4d
 Kernel Version:             4.4.0-101-generic
 OS Image:                   Ubuntu 16.04.3 LTS
 Operating System:           linux
 Architecture:               amd64
 Container Runtime Version:  docker://Unknown
 Kubelet Version:            v1.8.3+coreos.0
 Kube-Proxy Version:         v1.8.3+coreos.0
ExternalID:                  kube03
Non-terminated Pods:         (11 in total)
  Namespace                  Name                                        CPU Requests  CPU Limits  Memory Requests  Memory Limits
  ---------                  ----                                        ------------  ----------  ---------------  -------------
  default                    netchecker-agent-hostnet-qn246              15m (0%)      30m (1%)    64M (3%)         100M (5%)
  default                    netchecker-agent-tnhvb                      15m (0%)      30m (1%)    64M (3%)         100M (5%)
  default                    netchecker-server-77b8944dc-5zrk7           50m (2%)      100m (5%)   64M (3%)         256M (14%)
  kube-system                calico-node-wk69p                           150m (7%)     300m (15%)  64M (3%)         500M (28%)
  kube-system                elasticsearch-logging-v1-dbf5df58b-v5987    100m (5%)     1 (52%)     0 (0%)           0 (0%)
  kube-system                fluentd-es-v1.22-g6ckh                      100m (5%)     0 (0%)      200Mi (12%)      200Mi (12%)
  kube-system                kibana-logging-649489c8bb-76qgn             100m (5%)     100m (5%)   0 (0%)           0 (0%)
  kube-system                kube-dns-cf9d8c47-2rr88                     260m (13%)    0 (0%)      110Mi (6%)       170Mi (10%)
  kube-system                kube-proxy-kube03                           150m (7%)     500m (26%)  64M (3%)         2G (115%)
  kube-system                kubedns-autoscaler-86c47697df-jwk6l         20m (1%)      0 (0%)      10Mi (0%)        0 (0%)
  kube-system                nginx-proxy-kube03                          25m (1%)      300m (15%)  32M (1%)         512M (29%)
Allocated resources:
  (Total limits may be over 100 percent, i.e., overcommitted.)
  CPU Requests  CPU Limits    Memory Requests  Memory Limits
  ------------  ----------    ---------------  -------------
  985m (51%)    2360m (124%)  687544320 (39%)  3855973120 (222%)
Events:
  Type    Reason                   Age                From                Message
  ----    ------                   ----               ----                -------
  Normal  Starting                 12m                kubelet, kube03     Starting kubelet.
  Normal  NodeAllocatableEnforced  12m                kubelet, kube03     Updated Node Allocatable limit across pods
  Normal  NodeHasSufficientDisk    12m (x8 over 12m)  kubelet, kube03     Node kube03 status is now: NodeHasSufficientDisk
  Normal  NodeHasSufficientMemory  12m (x8 over 12m)  kubelet, kube03     Node kube03 status is now: NodeHasSufficientMemory
  Normal  NodeHasNoDiskPressure    12m (x7 over 12m)  kubelet, kube03     Node kube03 status is now: NodeHasNoDiskPressure
  Normal  Starting                 12m                kube-proxy, kube03  Starting kube-proxy.


Name:               kube04
Roles:              node
Labels:             beta.kubernetes.io/arch=amd64
                    beta.kubernetes.io/os=linux
                    kubernetes.io/hostname=kube04
                    node-role.kubernetes.io/node=true
Annotations:        alpha.kubernetes.io/provided-node-ip=192.168.121.92
                    node.alpha.kubernetes.io/ttl=0
                    volumes.kubernetes.io/controller-managed-attach-detach=true
</span><span class="gp">Taints:             &lt;none&gt;</span><span class="w">
</span><span class="go">CreationTimestamp:  Fri, 01 Dec 2017 07:48:17 +0000
Conditions:
  Type             Status  LastHeartbeatTime                 LastTransitionTime                Reason                       Message
  ----             ------  -----------------                 ------------------                ------                       -------
  OutOfDisk        False   Fri, 01 Dec 2017 08:00:12 +0000   Fri, 01 Dec 2017 07:48:17 +0000   KubeletHasSufficientDisk     kubelet has sufficient disk space available
  MemoryPressure   False   Fri, 01 Dec 2017 08:00:12 +0000   Fri, 01 Dec 2017 07:48:17 +0000   KubeletHasSufficientMemory   kubelet has sufficient memory available
  DiskPressure     False   Fri, 01 Dec 2017 08:00:12 +0000   Fri, 01 Dec 2017 07:48:17 +0000   KubeletHasNoDiskPressure     kubelet has no disk pressure
  Ready            True    Fri, 01 Dec 2017 08:00:12 +0000   Fri, 01 Dec 2017 07:49:18 +0000   KubeletReady                 kubelet is posting ready status
Addresses:
  InternalIP:  192.168.121.92
  Hostname:    kube04
Capacity:
 cpu:     2
 memory:  2048056Ki
 pods:    110
Allocatable:
 cpu:     1900m
 memory:  1695656Ki
 pods:    110
System Info:
 Machine ID:                 b16219f793e6953e4cc3a6375a15800f
 System UUID:                6DC8CDBF-7D48-4E25-A6D7-E5803A18A59C
 Boot ID:                    3ea8882e-bf05-4e26-8028-ffa54638e562
 Kernel Version:             4.4.0-101-generic
 OS Image:                   Ubuntu 16.04.3 LTS
 Operating System:           linux
 Architecture:               amd64
 Container Runtime Version:  docker://Unknown
 Kubelet Version:            v1.8.3+coreos.0
 Kube-Proxy Version:         v1.8.3+coreos.0
ExternalID:                  kube04
Non-terminated Pods:         (10 in total)
  Namespace                  Name                                        CPU Requests  CPU Limits  Memory Requests  Memory Limits
  ---------                  ----                                        ------------  ----------  ---------------  -------------
  default                    netchecker-agent-hostnet-kr6pn              15m (0%)      30m (1%)    64M (3%)         100M (5%)
  default                    netchecker-agent-mtqnz                      15m (0%)      30m (1%)    64M (3%)         100M (5%)
  kube-system                calico-node-2sjrc                           150m (7%)     300m (15%)  64M (3%)         500M (28%)
  kube-system                elasticsearch-logging-v1-dbf5df58b-dk9vq    100m (5%)     1 (52%)     0 (0%)           0 (0%)
  kube-system                fluentd-es-v1.22-kg6zc                      100m (5%)     0 (0%)      200Mi (12%)      200Mi (12%)
  kube-system                kube-dns-cf9d8c47-qkp4j                     260m (13%)    0 (0%)      110Mi (6%)       170Mi (10%)
  kube-system                kube-proxy-kube04                           150m (7%)     500m (26%)  64M (3%)         2G (115%)
  kube-system                kubernetes-dashboard-7fd45476f8-fl9sj       50m (2%)      100m (5%)   64M (3%)         256M (14%)
  kube-system                nginx-proxy-kube04                          25m (1%)      300m (15%)  32M (1%)         512M (29%)
  kube-system                tiller-deploy-546cf9696c-x9pgt              0 (0%)        0 (0%)      0 (0%)           0 (0%)
Allocated resources:
  (Total limits may be over 100 percent, i.e., overcommitted.)
  CPU Requests  CPU Limits    Memory Requests  Memory Limits
  ------------  ----------    ---------------  -------------
  865m (45%)    2260m (118%)  677058560 (38%)  3855973120 (222%)
Events:
  Type    Reason                   Age                From             Message
  ----    ------                   ----               ----             -------
  Normal  Starting                 12m                kubelet, kube04  Starting kubelet.
  Normal  NodeAllocatableEnforced  12m                kubelet, kube04  Updated Node Allocatable limit across pods
  Normal  NodeHasSufficientDisk    12m (x8 over 12m)  kubelet, kube04  Node kube04 status is now: NodeHasSufficientDisk
  Normal  NodeHasSufficientMemory  12m (x8 over 12m)  kubelet, kube04  Node kube04 status is now: NodeHasSufficientMemory
  Normal  NodeHasNoDiskPressure    12m (x7 over 12m)  kubelet, kube04  Node kube04 status is now: NodeHasNoDiskPressure
</span></pre></table></code></div></div><p>Then you can work with the Kubernetes Cluster like usual…</p><p>You can see the whole installation here:</p><p><a href="https://asciinema.org/a/150506" class="img-link shimmer" ><img src="https://asciinema.org/a/150506.svg" alt="asciicast" loading="lazy"></a></p><p>Some parts mentioned above are specific to Fedora 26, but most of it can be achievable on the other distros.</p><p>Enjoy ;-)</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw me-1"></i> <a href="/categories/kubernetes/">Kubernetes</a>, <a href="/categories/virtualization/">Virtualization</a>, <a href="/categories/linux-xvx-cz/">linux.xvx.cz</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw me-1"></i> <a href="/tags/kubernetes/" class="post-tag no-text-decoration" >kubernetes</a> <a href="/tags/kubespray/" class="post-tag no-text-decoration" >kubespray</a> <a href="/tags/vagrant/" class="post-tag no-text-decoration" >vagrant</a> <a href="/tags/kvm/" class="post-tag no-text-decoration" >kvm</a></div><div class=" post-tail-bottom d-flex justify-content-between align-items-center mt-5 pb-2 " ><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper d-flex align-items-center"> <span class="share-label text-muted">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Setup%20production%20ready%20Kubernetes%20cluster%20using%20Kubespray%20and%20Vagrant%20running%20on%20the%20libvirt%20KVMs%20-%20Petr's%20Blog&url=https%3A%2F%2Fruzickap.github.io%2Fposts%2Fsetup-production-ready-kubernetes-cluster-using-kubespray-and-vagrant-running-on-the-libvirt-kvms%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Twitter" aria-label="Twitter"> <i class="fa-fw fa-brands fa-square-x-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Setup%20production%20ready%20Kubernetes%20cluster%20using%20Kubespray%20and%20Vagrant%20running%20on%20the%20libvirt%20KVMs%20-%20Petr's%20Blog&u=https%3A%2F%2Fruzickap.github.io%2Fposts%2Fsetup-production-ready-kubernetes-cluster-using-kubespray-and-vagrant-running-on-the-libvirt-kvms%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Facebook" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fruzickap.github.io%2Fposts%2Fsetup-production-ready-kubernetes-cluster-using-kubespray-and-vagrant-running-on-the-libvirt-kvms%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Linkedin" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <script defer type="module" src="https://cdn.jsdelivr.net/npm/@justinribeiro/share-to-mastodon/+esm"></script> <button class="btn text-start" data-bs-toggle="tooltip" data-bs-placement="top" title="Mastodon" aria-label="Mastodon"> <share-to-mastodon class="share-mastodon" message="Setup%20production%20ready%20Kubernetes%20cluster%20using%20Kubespray%20and%20Vagrant%20running%20on%20the%20libvirt%20KVMs%20-%20Petr's%20Blog" url="https%3A%2F%2Fruzickap.github.io%2Fposts%2Fsetup-production-ready-kubernetes-cluster-using-kubespray-and-vagrant-running-on-the-libvirt-kvms%2F"customInstanceList="[{&quot;label&quot;:&quot;mastodon.social&quot;,&quot;link&quot;:&quot;https://mastodon.social/&quot;},{&quot;label&quot;:&quot;mastodon.online&quot;,&quot;link&quot;:&quot;https://mastodon.online/&quot;},{&quot;label&quot;:&quot;fosstodon.org&quot;,&quot;link&quot;:&quot;https://fosstodon.org/&quot;},{&quot;label&quot;:&quot;photog.social&quot;,&quot;link&quot;:&quot;https://photog.social/&quot;}]" > <i class="fa-fw fa-brands fa-mastodon"></i> </share-to-mastodon> </button> <button id="copy-link" aria-label="Copy link" class="btn small" data-bs-toggle="tooltip" data-bs-placement="top" title="Copy link" data-title-succeed="Link copied successfully!" > <i class="fa-fw fas fa-link pe-none fs-6"></i> </button> </span></div></div></div></article></main><aside aria-label="Panel" id="panel-wrapper" class="col-xl-3 ps-2 text-muted"><div class="access"><section id="access-lastmod"><h2 class="panel-heading">Recently Updated</h2><ul class="content list-unstyled ps-0 pb-1 ms-1 mt-2"><li class="text-truncate lh-lg"> <a href="/posts/installtion-f5-bigip-virtual-edition-to-rhel7/">Installation F5 BIGIP Virtual Edition to RHEL7</a><li class="text-truncate lh-lg"> <a href="/posts/detect-a-hacker-attacks-eks-vm/">Detect the hacker attacks on Amazon EKS and EC2 instances</a><li class="text-truncate lh-lg"> <a href="/posts/secure-cheap-amazon-eks-auto/">Build secure and cheap Amazon EKS Auto Mode</a><li class="text-truncate lh-lg"> <a href="/posts/eks-auto-cert-manager-velero/">Amazon EKS Auto Mode with cert-manager and Velero</a><li class="text-truncate lh-lg"> <a href="/posts/mcp-servers-k8s/">MCP Servers running on Kubernetes</a></ul></section><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/kubernetes/">kubernetes</a> <a class="post-tag btn btn-outline-primary" href="/tags/amazon-eks/">amazon-eks</a> <a class="post-tag btn btn-outline-primary" href="/tags/security/">security</a> <a class="post-tag btn btn-outline-primary" href="/tags/cert-manager/">cert-manager</a> <a class="post-tag btn btn-outline-primary" href="/tags/eksctl/">eksctl</a> <a class="post-tag btn btn-outline-primary" href="/tags/bash/">bash</a> <a class="post-tag btn btn-outline-primary" href="/tags/pxe/">pxe</a> <a class="post-tag btn btn-outline-primary" href="/tags/wifi/">wifi</a> <a class="post-tag btn btn-outline-primary" href="/tags/prometheus/">prometheus</a> <a class="post-tag btn btn-outline-primary" href="/tags/automation/">automation</a></div></section></div></aside></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-md-4"><aside id="related-posts" aria-labelledby="related-label"><h3 class="mb-4" id="related-label">Further Reading</h3><nav class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4"><article class="col"> <a href="/posts/create-kubernetes-multinode-cluster-using-multiple-vms/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1524002400" data-df="ll" > Apr 18, 2018 </time><h4 class="pt-0 my-2">Create Kubernetes Multinode Cluster using multiple VMs</h4><div class="text-muted"><p>Create Kubernetes Multinode Cluster using multiple VMs</p></div></div></a></article><article class="col"> <a href="/posts/create-lab-infrastructure-running-virtual-machines-with-maas-using-vagrant/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1519081200" data-df="ll" > Feb 20, 2018 </time><h4 class="pt-0 my-2">Create lab infrastructure running Virtual machines with MAAS using Vagrant</h4><div class="text-muted"><p>Create lab infrastructure running Virtual machines with MAAS using Vagrant</p></div></div></a></article><article class="col"> <a href="/posts/create-windows-image-using-packer-and-ansible-and-then-run-it-in-vagrant-libvirt/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1508796000" data-df="ll" > Oct 24, 2017 </time><h4 class="pt-0 my-2">Create Windows image using Packer and Ansible and then run it in Vagrant (libvirt)</h4><div class="text-muted"><p>Create Windows image using Packer and Ansible and then run it in Vagrant (libvirt)</p></div></div></a></article></nav></aside><nav class="post-navigation d-flex justify-content-between" aria-label="Post Navigation"> <a href="/posts/create-windows-image-using-packer-and-ansible-and-then-run-it-in-vagrant-libvirt/" class="btn btn-outline-primary" aria-label="Older" ><p>Create Windows image using Packer and Ansible and then run it in Vagrant (libvirt)</p></a> <a href="/posts/how-i-began-with-darktable/" class="btn btn-outline-primary" aria-label="Newer" ><p>How I began with Darktable</p></a></nav><footer aria-label="Site Info" class=" d-flex flex-column justify-content-center text-muted flex-lg-row justify-content-lg-between align-items-lg-center pb-lg-3 " ><p>© <time>2026</time> <a href="https://twitter.com/Ruzicka_Petr">Petr Ruzicka</a>. <span data-bs-toggle="tooltip" data-bs-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author." >Some rights reserved.</span></p><p>Using the <a data-bs-toggle="tooltip" data-bs-placement="top" title="v7.4.1" href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener" >Chirpy</a> theme for <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a>.</p></footer></div></div><div id="search-result-wrapper" class="d-flex justify-content-center d-none"><div class="col-11 content"><div id="search-hints"><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/kubernetes/">kubernetes</a> <a class="post-tag btn btn-outline-primary" href="/tags/amazon-eks/">amazon-eks</a> <a class="post-tag btn btn-outline-primary" href="/tags/security/">security</a> <a class="post-tag btn btn-outline-primary" href="/tags/cert-manager/">cert-manager</a> <a class="post-tag btn btn-outline-primary" href="/tags/eksctl/">eksctl</a> <a class="post-tag btn btn-outline-primary" href="/tags/bash/">bash</a> <a class="post-tag btn btn-outline-primary" href="/tags/pxe/">pxe</a> <a class="post-tag btn btn-outline-primary" href="/tags/wifi/">wifi</a> <a class="post-tag btn btn-outline-primary" href="/tags/prometheus/">prometheus</a> <a class="post-tag btn btn-outline-primary" href="/tags/automation/">automation</a></div></section></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><aside aria-label="Scroll to Top"> <button id="back-to-top" type="button" class="btn btn-lg btn-box-shadow"> <i class="fas fa-angle-up"></i> </button></aside></div><div id="mask" class="d-none position-fixed w-100 h-100 z-1"></div><aside id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-bs-animation="true" data-bs-autohide="false" ><div class="toast-header"> <button type="button" class="btn-close ms-auto" data-bs-dismiss="toast" aria-label="Close" ></button></div><div class="toast-body text-center pt-0"><p class="px-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></aside><script> (function () { const themeMapper = Theme.getThemeMapper('light', 'dark_dimmed'); const initTheme = themeMapper[Theme.visualState]; let lang = 'en';if (lang.length > 2 && !lang.startsWith('zh')) { lang = lang.slice(0, 2); } let giscusAttributes = { src: 'https://giscus.app/client.js', 'data-repo': 'ruzickap/ruzickap.github.io', 'data-repo-id': 'R_kgDOGkp4nQ', 'data-category': 'General', 'data-category-id': 'DIC_kwDOGkp4nc4CSdu1', 'data-mapping': 'pathname', 'data-strict' : '0', 'data-reactions-enabled': '1', 'data-emit-metadata': '0', 'data-theme': initTheme, 'data-input-position': 'bottom', 'data-lang': lang, 'data-loading': 'lazy', crossorigin: 'anonymous', async: '' }; let giscusNode = document.createElement('script'); Object.entries(giscusAttributes).forEach(([key, value]) => giscusNode.setAttribute(key, value) ); const $footer = document.querySelector('footer'); $footer.insertAdjacentElement("beforebegin", giscusNode); addEventListener('message', (event) => { if (event.source === window && event.data && event.data.id === Theme.ID) { const newTheme = themeMapper[Theme.visualState]; const message = { setConfig: { theme: newTheme } }; const giscus = document.getElementsByClassName('giscus-frame')[0].contentWindow; giscus.postMessage({ giscus: message }, 'https://giscus.app'); } }); })(); </script> <script> document.addEventListener('DOMContentLoaded', () => { SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<article class="px-1 px-sm-2 px-lg-4 px-xl-0"><header><h2><a href="{url}">{title}</a></h2><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div></header><p>{content}</p></article>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); }); </script>
