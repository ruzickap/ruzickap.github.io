<!doctype html><html lang="en" data-mode="dark"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.4.1" /><meta property="og:title" content="Installation F5 BIGIP Virtual Edition to RHEL7" /><meta name="author" content="Petr Ruzicka" /><meta property="og:locale" content="en" /><meta name="description" content="Installation F5 BIGIP Virtual Edition to RHEL7" /><meta property="og:description" content="Installation F5 BIGIP Virtual Edition to RHEL7" /><link rel="canonical" href="https://ruzickap.github.io/posts/installtion-f5-bigip-virtual-edition-to-rhel7/" /><meta property="og:url" content="https://ruzickap.github.io/posts/installtion-f5-bigip-virtual-edition-to-rhel7/" /><meta property="og:site_name" content="Petr’s Blog" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2014-12-23T00:00:00+01:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Installation F5 BIGIP Virtual Edition to RHEL7" /><meta name="twitter:site" content="@Ruzicka_Petr" /><meta name="twitter:creator" content="@Ruzicka_Petr" /><meta name="google-site-verification" content="4ugGShJoiB9veoPwFcMsMjzk-1BYbi5ozcSnovkBWtA" /><meta name="msvalidate.01" content="592AB158E3F9EF887F8DC8E69A2FF754" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Petr Ruzicka","url":"https://petr.ruzicka.dev"},"dateModified":"2026-02-19T17:36:39+01:00","datePublished":"2014-12-23T00:00:00+01:00","description":"Installation F5 BIGIP Virtual Edition to RHEL7","headline":"Installation F5 BIGIP Virtual Edition to RHEL7","mainEntityOfPage":{"@type":"WebPage","@id":"https://ruzickap.github.io/posts/installtion-f5-bigip-virtual-edition-to-rhel7/"},"url":"https://ruzickap.github.io/posts/installtion-f5-bigip-virtual-edition-to-rhel7/"}</script><title>Installation F5 BIGIP Virtual Edition to RHEL7 | Petr's Blog</title><link rel="icon" type="image/png" href="/assets/img/favicons/favicon-96x96.png" sizes="96x96"><link rel="icon" type="image/svg+xml" href="/assets/img/favicons/favicon.svg"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="/assets/css/jekyll-theme-chirpy.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@7.1.0/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.36.4/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox@3.3.0/dist/css/glightbox.min.css"> <script src="/assets/js/dist/theme.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.umd.min.js,npm/glightbox@3.3.0/dist/js/glightbox.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js,npm/dayjs@1.11.18/dayjs.min.js,npm/dayjs@1.11.18/locale/en.js,npm/dayjs@1.11.18/plugin/relativeTime.js,npm/dayjs@1.11.18/plugin/localizedFormat.js,npm/tocbot@4.36.4/dist/tocbot.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script> document.addEventListener('DOMContentLoaded', () => { const pv = document.getElementById('pageviews'); if (pv !== null) { const uri = location.pathname.replace(/\/$/, ''); const url = `https://ruzickap-github-io.goatcounter.com/counter/${encodeURIComponent(uri)}.json`; fetch(url) .then((response) => response.json()) .then((data) => { const count = data.count.replace(/\D/g, ''); pv.innerText = new Intl.NumberFormat().format(count); }) .catch((error) => { pv.innerText = '1'; }); } }); </script> <script defer src="/app.min.js?baseurl=&register=true" ></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-64WRCWDZM8"></script> <script> document.addEventListener('DOMContentLoaded', () => { window.dataLayer = window.dataLayer || []; function gtag() { dataLayer.push(arguments); } gtag('js', new Date()); gtag('config', 'G-64WRCWDZM8'); }); </script> <script async src="https://gc.zgo.at/count.js" data-goatcounter="https://ruzickap-github-io.goatcounter.com/count" ></script> <script defer src="https://cloud.umami.is/script.js" data-website-id="380ea41a-7d5f-4423-8e13-03151bde195f" ></script> <script defer src="https://static.cloudflareinsights.com/beacon.min.js" data-cf-beacon='{"token": "ad8c64404e1e41dba184019564cf11bb"}' ></script><body><aside aria-label="Sidebar" id="sidebar" class="d-flex flex-column align-items-end"><header class="profile-wrapper"> <a href="/" id="avatar" class="rounded-circle"><img src="https://0.gravatar.com/avatar/5484c0fd9f98e2ffd9212b158931bf4b?s=200" width="112" height="112" alt="avatar" onerror="this.style.display='none'"></a> <a class="site-title d-block" href="/">Petr's Blog</a><p class="site-subtitle fst-italic mb-0">DevOps • GitOps • K8s</p></header><nav class="flex-column flex-grow-1 w-100 ps-0"><ul class="nav"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/projects/" class="nav-link"> <i class="fa-fw fas fa-project-diagram"></i> <span>PROJECTS</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle"></i> <span>ABOUT</span> </a></ul></nav><div class="sidebar-bottom d-flex flex-wrap align-items-center w-100"> <a href="https://github.com/ruzickap" aria-label="github" target="_blank" rel="noopener noreferrer" > <i class="fab fa-github"></i> </a> <a href="javascript:location.href = 'mailto:' + ['petr.ruzicka','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="https://petr.ruzicka.dev" aria-label="homepage" target="_blank" rel="noopener noreferrer" > <i class="fas fa-home"></i> </a> <a href="https://mastodon.social/@petr_ruzicka" aria-label="mastodon" target="_blank" rel="noopener noreferrer me" > <i class="fab fa-mastodon"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></aside><div id="main-wrapper" class="d-flex justify-content-center"><div class="container d-flex flex-column px-xxl-5"><header id="topbar-wrapper" class="flex-shrink-0" aria-label="Top Bar"><div id="topbar" class="d-flex align-items-center justify-content-between px-lg-3 h-100" ><nav id="breadcrumb" aria-label="Breadcrumb"> <span> <a href="/">Home</a> </span> <span>Installation F5 BIGIP Virtual Edition to RHEL7</span></nav><button type="button" id="sidebar-trigger" class="btn btn-link" aria-label="Sidebar"> <i class="fas fa-bars fa-fw"></i> </button><div id="topbar-title"> Post</div><button type="button" id="search-trigger" class="btn btn-link" aria-label="Search"> <i class="fas fa-search fa-fw"></i> </button> <search id="search" class="align-items-center ms-3 ms-lg-0"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..." > </search> <button type="button" class="btn btn-link text-decoration-none" id="search-cancel">Cancel</button></div></header><div class="row flex-grow-1"><main aria-label="Main Content" class="col-12 col-lg-11 col-xl-9 px-md-4"><article class="px-1" data-toc="true"><header><h1 data-toc-skip>Installation F5 BIGIP Virtual Edition to RHEL7</h1><p class="post-desc fw-light mb-4">Installation F5 BIGIP Virtual Edition to RHEL7</p><div class="post-meta text-muted"> <span> Posted <time data-ts="1419289200" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Dec 23, 2014 </time> </span> <span> Updated <time data-ts="1771518999" data-df="ll" data-bs-toggle="tooltip" data-bs-placement="bottom" > Feb 19, 2026 </time> </span><div class="d-flex justify-content-between"> <span> By <em> <a href="https://petr.ruzicka.dev">Petr Ruzicka</a> </em> </span><div> <span> <em id="pageviews"> <i class="fas fa-spinner fa-spin small"></i> </em> views </span> <span class="readtime" data-bs-toggle="tooltip" data-bs-placement="bottom" title="2555 words" > <em>14 min</em> read</span></div></div></div></header><div id="toc-bar" class="d-flex align-items-center justify-content-between invisible"> <span class="label text-truncate">Installation F5 BIGIP Virtual Edition to RHEL7</span> <button type="button" class="toc-trigger btn me-1"> <i class="fa-solid fa-list-ul fa-fw"></i> </button></div><button id="toc-solo-trigger" type="button" class="toc-trigger btn btn-outline-secondary btn-sm"> <span class="label ps-2 pe-1">Contents</span> <i class="fa-solid fa-angle-right fa-fw"></i> </button> <dialog id="toc-popup" class="p-0"><div class="header d-flex flex-row align-items-center justify-content-between"><div class="label text-truncate py-2 ms-4">Installation F5 BIGIP Virtual Edition to RHEL7</div><button id="toc-popup-close" type="button" class="btn mx-1 my-1 opacity-75"> <i class="fas fa-close"></i> </button></div><div id="toc-popup-content" class="px-4 py-3 pb-4"></div></dialog><div class="content"><blockquote class="prompt-info"><p>Original post from <a href="https://linux.xvx.cz/2014/12/installtion-f5-bigip-virtual-edition-to.html">linux.xvx.cz</a></p></blockquote><p>The physical hardware running the F5 BIG-IP Local Traffic Manager load balancing software is powerful, but also quite expensive. For a lab environment you do not need to buy new hardware, but you can get the <a href="https://web.archive.org/web/20150114015323/https://www.f5.com/trial/big-ip-ltm-virtual-edition.php">F5 BIG-IP Local Traffic Manager Virtual Edition</a> and install it as virtual machine.</p><p>That is the way I would like to describe here. I had one spare <a href="https://web.archive.org/web/20150207155049/http://www8.hp.com/us/en/products/proliant-servers/product-detail.html?oid=5177957">HP ProLiant DL380p Gen8</a> so <a href="https://en.wikipedia.org/wiki/Red_Hat_Enterprise_Linux#RHEL_7">RHEL7</a> virtualization (<a href="https://www.linux-kvm.org/">KVM</a>) was the first choice.</p><p>In short I had to deal with bonding (two cables going to the 2 separate switches), trunk containing 3 vlans, bridges and finally with the F5 configuration itself.</p><p><a href="https://raw.githubusercontent.com/ruzickap/linux.xvx.cz/refs/heads/gh-pages/pics/f5_kvm/f5_kvm.svg" class="popup img-link shimmer"><img src="https://raw.githubusercontent.com/ruzickap/linux.xvx.cz/refs/heads/gh-pages/pics/f5_kvm/f5_kvm.svg" alt="F5 BIG-IP Virtual Edition network diagram with KVM" loading="lazy"></a></p><p>Here are some notes about it…</p><h2 id="rhel7-configuration"><span class="me-2">RHEL7 Configuration</span><a href="#rhel7-configuration" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Start with network:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
</pre><td class="rouge-code"><pre><span class="c">#Set hostname</span>
hostnamectl set-hostname lb01-server.example.com

<span class="c">#Remove all network configuration</span>
nmcli con del eno<span class="o">{</span>1,2,3,4<span class="o">}</span>

<span class="c">#Configure bonding</span>
nmcli con add <span class="nb">type </span>bond con-name bond0 ifname bond0 mode active-backup
nmcli con add <span class="nb">type </span>bond-slave con-name eno1 ifname eno1 master bond0
nmcli con add <span class="nb">type </span>bond-slave con-name eno2 ifname eno2 master bond0

<span class="c">#Configure bridging, IPs, DNS,</span>
nmcli con add <span class="nb">type </span>bridge con-name br1169 ifname br1169 ip4 10.0.0.226/24 gw4 10.0.0.1
nmcli con mod br1169 ipv4.dns <span class="s2">"10.0.0.141 10.0.0.142"</span>
nmcli con mod br1169 ipv4.dns-search <span class="s2">"example.com"</span>

<span class="c">#Configure VLANs</span>
nmcli con add <span class="nb">type </span>bridge-slave con-name bond0.1169 ifname bond0.1169 master br1169
nmcli con add <span class="nb">type </span>bridge-slave con-name bond0.1170 ifname bond0.1170 master br1170
nmcli con add <span class="nb">type </span>bridge-slave con-name bond0.1261 ifname bond0.1261 master br1261

<span class="c">#NetworkManager can not bridge VLANs in RHEL7 - so here is a workaround:</span>
<span class="nb">sed</span> <span class="nt">-i</span> <span class="s1">'s/^TYPE=.*/TYPE=Vlan/'</span> /etc/sysconfig/network-scripts/ifcfg-bond0.<span class="o">{</span>1170,1261,1169<span class="o">}</span>
<span class="nb">echo</span> <span class="s2">"VLAN=yes"</span> <span class="o">&gt;&gt;</span> /etc/sysconfig/network-scripts/ifcfg-bond0.1169
<span class="nb">echo</span> <span class="s2">"VLAN=yes"</span> <span class="o">&gt;&gt;</span> /etc/sysconfig/network-scripts/ifcfg-bond0.1170
<span class="nb">echo</span> <span class="s2">"VLAN=yes"</span> <span class="o">&gt;&gt;</span> /etc/sysconfig/network-scripts/ifcfg-bond0.1261

reboot
</pre></table></code></div></div><p>Do some basic RHEL7 customizations + <a href="https://web.archive.org/web/20141231041952/http://h17007.www1.hp.com/us/en/enterprise/servers/products/service_pack/spp/index.aspx">HP SPP</a> installation:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
</pre><td class="rouge-code"><pre>umount /home
<span class="nb">sed</span> <span class="nt">-i</span> <span class="s1">'/\/home/d'</span> /etc/fstab
lvremove <span class="nt">-f</span> /dev/mapper/rhel-home
lvextend <span class="nt">--resizefs</span> <span class="nt">-l</span> +100%FREE /dev/mapper/rhel-root

curl http://10.0.0.141:6809/fusion/rhel-server-7.0-x86_64-dvd.iso <span class="o">&gt;</span> /var/tmp/rhel-server-7.0-x86_64-dvd.iso

<span class="nb">mkdir</span> /mnt/iso
<span class="nb">echo</span> <span class="s2">"/var/tmp/rhel-server-7.0-x86_64-dvd.iso /mnt/iso iso9660 loop,ro 0 0"</span> <span class="o">&gt;&gt;</span> /etc/fstab
mount /mnt/iso

<span class="nb">cp</span> /mnt/iso/media.repo /etc/yum.repos.d/
<span class="nb">chmod </span>u+w /etc/yum.repos.d/media.repo

<span class="nb">cat</span> <span class="o">&gt;&gt;</span> /etc/yum.repos.d/media.repo <span class="o">&lt;&lt;</span> <span class="no">EOF</span><span class="sh">
enabled=1
baseurl=file:///mnt/iso
</span><span class="no">EOF

</span>yum <span class="nb">install</span> <span class="nt">-y</span> http://ftp.fi.muni.cz/pub/linux/fedora/epel/7/x86_64/e/epel-release-7-2.noarch.rpm

yum <span class="nb">install</span> <span class="nt">-y</span> bash-completion bind-utils bridge-utils dstat htop httpd ipmitool iotop lftp lsof mailx man mc mlocate mutt net-snmp net-snmp-utils net-tools nmap ntp ntpdate openssh-clients postfix rsync sos smartmontools screen strace sysstat telnet tcpdump traceroute unzip vim wget wireshark xz yum-utils

<span class="nb">sed</span> <span class="nt">-i</span> <span class="s1">'s@^\*/10 \*@\*/1 \*@'</span> /etc/cron.d/sysstat
<span class="nb">printf</span> <span class="s1">'%s\n'</span> <span class="s2">"PS1='</span><span class="se">\[\0</span><span class="s2">33[01;31m</span><span class="se">\]\h\[\0</span><span class="s2">33[01;34m</span><span class="se">\]</span><span class="s2"> </span><span class="se">\w</span><span class="s2"> #</span><span class="se">\[\0</span><span class="s2">33[00m</span><span class="se">\]</span><span class="s2"> '"</span> <span class="o">&gt;&gt;</span> /root/.bashrc
<span class="nb">echo</span> <span class="nt">-e</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">alias sar='LANG=C sar'"</span> <span class="o">&gt;&gt;</span> /etc/bashrc

<span class="nb">cat</span> <span class="o">&gt;&gt;</span> /etc/screenrc <span class="o">&lt;&lt;</span> <span class="no">EOF</span><span class="sh">
defscrollback 10000
startup_message off
termcapinfo xterm ti@:te@
hardstatus alwayslastline '%{= kG}[ %{G}%H %{g}][%= %{= kw}%?%-Lw%?%{r}(%{W}%n*%f%t%?(%u)%?%{r})%{w}%?%+Lw%?%?%= %{g}][%{B} %d/%m %{W}%c %{g}]'
vbell off
</span><span class="no">EOF

</span><span class="nv">IP</span><span class="o">=</span><span class="si">$(</span>ip a s br1169 | <span class="nb">sed</span> <span class="nt">-n</span> <span class="s1">'s@[[:space:]]*inet \([^/]*\)/.*@\1@p'</span><span class="si">)</span>
<span class="nb">echo</span> <span class="nt">-e</span> <span class="s2">"</span><span class="k">${</span><span class="nv">IP</span><span class="k">}</span><span class="se">\t\t</span><span class="nv">$HOSTNAME</span><span class="s2">"</span> <span class="o">&gt;&gt;</span> /etc/hosts

<span class="nb">sed</span> <span class="nt">-i</span> <span class="s1">'s/^GRUB_TIMEOUT=.*/GRUB_TIMEOUT=1/;s/quiet//;s/rhgb//'</span> /etc/default/grub
grub2-mkconfig <span class="nt">-o</span> /boot/grub2/grub.cfg

<span class="nb">sed</span> <span class="nt">-i</span> <span class="s1">'s/SELINUX=enforcing/SELINUX=permissive/'</span> /etc/selinux/config

chkconfig firewalld off
<span class="c">#chkconfig rhsmcertd off</span>
<span class="c">#chkconfig rhnsd off</span>
<span class="c">#chmod a-x /etc/cron.daily/rhsmd</span>

systemctl disable avahi-daemon.socket avahi-daemon.service
systemctl disable iprdump iprinit iprupdate
chkconfig ntpd on

<span class="nb">sed</span> <span class="nt">-i</span>.orig <span class="s2">"s/^</span><span class="se">\(</span><span class="s2">SYNC_HWCLOCK</span><span class="se">\)</span><span class="s2">=no/</span><span class="se">\1</span><span class="s2">=yes/"</span> /etc/sysconfig/ntpdate

chkconfig snmpd on

<span class="nb">mkdir</span> <span class="nt">-p</span> /etc/skel/.mc/
<span class="nb">chmod </span>700 /etc/skel/.mc

<span class="nb">cat</span> <span class="o">&gt;</span> /etc/skel/.mc/ini <span class="o">&lt;&lt;</span> <span class="no">EOF</span><span class="sh">
[Midnight-Commander]
auto_save_setup=0
drop_menus=1
use_internal_edit=1
confirm_exit=0

[Layout]
menubar_visible=0
message_visible=0
</span><span class="no">EOF
</span><span class="nb">cp</span> <span class="nt">-r</span> /etc/skel/.mc /root/

<span class="nb">test</span> <span class="nt">-f</span> /usr/libexec/mc/mc-wrapper.sh <span class="o">&amp;&amp;</span> <span class="nb">sed</span> <span class="nt">-i</span> <span class="s1">'s/mc-wrapper.sh/mc-wrapper.sh --nomouse/'</span> /etc/profile.d/mc.sh

<span class="nb">cat</span> <span class="o">&gt;</span> /etc/yum.repos.d/hp.repo <span class="o">&lt;&lt;</span> <span class="sh">\</span><span class="no">EOF</span><span class="sh">
[HP-SPP]
name=HP Software Delivery Repository for SPP </span><span class="nv">$releasever</span><span class="sh"> - </span><span class="nv">$basearch</span><span class="sh">
baseurl=http://downloads.linux.hp.com/SDR/repo/spp/RHEL/</span><span class="nv">$releasever</span><span class="sh">/</span><span class="nv">$basearch</span><span class="sh">/current/
enabled=1
gpgcheck=0
</span><span class="no">EOF

</span>yum <span class="nb">install</span> <span class="nt">-y</span> hponcfg hp-snmp-agents hp-ams hpssacli hp-smh-templates hpsmh
hpsnmpconfig <span class="nt">--a</span> <span class="nt">--rws</span> my_write <span class="nt">--ros</span> my_read <span class="nt">--rwmips</span> 127.0.0.1 my_write <span class="nt">--romips</span> 127.0.0.1 my_read <span class="nt">--tcs</span> private <span class="nt">--tdips</span> 127.0.0.1 public <span class="nt">--sci</span> <span class="s2">"</span><span class="nv">$HOSTNAME</span><span class="s2">"</span> <span class="nt">--sli</span> My_Servers
/opt/hp/hpsmh/sbin/smhconfig <span class="nt">--autostart</span><span class="o">=</span><span class="nb">true

</span>postconf <span class="nt">-e</span> <span class="s1">'relayhost = yum.example.com'</span>
postconf <span class="nt">-e</span> <span class="s1">'inet_interfaces = all'</span>

<span class="nb">cat</span> <span class="o">&gt;&gt;</span> /etc/aliases <span class="o">&lt;&lt;</span> <span class="no">EOF</span><span class="sh">
root:           petr.ruzicka@gmail.com
</span><span class="no">EOF
</span>newaliases
</pre></table></code></div></div><p>Configure the <a href="https://libvirt.org/">libvirt</a> including networking and virtual machine running F5 BIG-IP LTM VE:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
</pre><td class="rouge-code"><pre>yum <span class="nb">install</span> <span class="nt">-y</span> qemu-kvm virt-install <span class="s2">"@Virtualization Platform"</span>
tuned-adm profile virtual-host

systemctl <span class="nb">enable </span>libvirt-guests.service
service libvirtd start
virsh net-autostart <span class="nt">--disable</span> default

<span class="k">for </span>VLAN <span class="k">in </span>1169 1170 1261<span class="p">;</span> <span class="k">do
  </span><span class="nb">cat</span> <span class="o">&gt;</span> /tmp/br<span class="nv">$VLAN</span>.xml <span class="o">&lt;&lt;</span> <span class="no">EOF</span><span class="sh">
&lt;network&gt;
  &lt;name&gt;br</span><span class="nv">$VLAN</span><span class="sh">&lt;/name&gt;
  &lt;forward mode='bridge'/&gt;
  &lt;bridge name='br</span><span class="nv">$VLAN</span><span class="sh">'/&gt;
&lt;/network&gt;
</span><span class="no">EOF

</span>  virsh net-define /tmp/br<span class="nv">$VLAN</span>.xml
  virsh net-autostart br<span class="nv">$VLAN</span>
<span class="k">done

</span><span class="nb">cat</span> <span class="o">&gt;&gt;</span> /etc/libvirt/libvirtd.conf <span class="o">&lt;&lt;</span> <span class="no">EOF</span><span class="sh">
listen_tcp = 1
listen_tls = 0
log_level = 2
log_outputs="2:syslog:libvirtd"
</span><span class="no">EOF

</span><span class="nb">cat</span> <span class="o">&gt;&gt;</span> /etc/sysconfig/libvirt-guests <span class="o">&lt;&lt;</span> <span class="no">EOF</span><span class="sh">

ON_SHUTDOWN=shutdown
SHUTDOWN_TIMEOUT=100
</span><span class="no">EOF

</span><span class="nb">echo</span> <span class="s1">'LIBVIRTD_ARGS="--listen"'</span> <span class="o">&gt;&gt;</span> /etc/sysconfig/libvirtd

wget http://10.0.0.141:6809/fusion/BIGIP-11.6.0.0.0.401.ALL.qcow2.zip <span class="nt">-P</span> /var/tmp/
unzip <span class="nt">-d</span> /var/lib/libvirt/images/ /var/tmp/BIGIP-11.6.0.0.0.401.ALL.qcow2.zip

reboot

<span class="c"># http://support.f5.com/kb/en-us/products/big-ip_ltm/manuals/product/bigip-ve-kvm-setup-11-3-0/2.html#conceptid</span>
virt-install <span class="se">\</span>
  <span class="nt">--name</span><span class="o">=</span>F5-BIGIP <span class="se">\</span>
  <span class="nt">--description</span><span class="o">=</span><span class="s2">"BIG-IP Local Traffic Manager (LTM) Virtual Edition (VE)"</span> <span class="se">\</span>
  <span class="nt">--disk</span> <span class="nv">path</span><span class="o">=</span>/var/lib/libvirt/images/BIGIP-11.6.0.0.0.401.qcow2,bus<span class="o">=</span>virtio,format<span class="o">=</span>qcow2 <span class="se">\</span>
  <span class="nt">--disk</span> <span class="nv">path</span><span class="o">=</span>/var/lib/libvirt/images/BIGIP-11.6.0.0.0.401.DATASTOR.ALL.qcow2,bus<span class="o">=</span>virtio,format<span class="o">=</span>qcow2 <span class="se">\</span>
  <span class="nt">--network</span><span class="o">=</span><span class="nv">bridge</span><span class="o">=</span>br1261,model<span class="o">=</span>virtio <span class="se">\</span>
  <span class="nt">--network</span><span class="o">=</span><span class="nv">bridge</span><span class="o">=</span>br1169,model<span class="o">=</span>virtio <span class="se">\</span>
  <span class="nt">--network</span><span class="o">=</span><span class="nv">bridge</span><span class="o">=</span>br1170,model<span class="o">=</span>virtio <span class="se">\</span>
  <span class="nt">--network</span><span class="o">=</span><span class="nb">type</span><span class="o">=</span>direct,source<span class="o">=</span>eno3,source_mode<span class="o">=</span>bridge,model<span class="o">=</span>virtio <span class="se">\</span>
  <span class="nt">--network</span><span class="o">=</span><span class="nb">type</span><span class="o">=</span>direct,source<span class="o">=</span>eno4,source_mode<span class="o">=</span>bridge,model<span class="o">=</span>virtio <span class="se">\</span>
  <span class="nt">--graphics</span> vnc,password<span class="o">=</span>admin123,listen<span class="o">=</span>0.0.0.0,port<span class="o">=</span>5900 <span class="se">\</span>
  <span class="nt">--serial</span> tcp,host<span class="o">=</span>:2222,mode<span class="o">=</span><span class="nb">bind</span>,protocol<span class="o">=</span>telnet <span class="se">\</span>
  <span class="nt">--vcpus</span><span class="o">=</span>4 <span class="nt">--cpu</span> host <span class="nt">--ram</span><span class="o">=</span>12288 <span class="se">\</span>
  <span class="nt">--os-type</span><span class="o">=</span>linux <span class="se">\</span>
  <span class="nt">--os-variant</span><span class="o">=</span>rhel6 <span class="se">\</span>
  <span class="nt">--import</span> <span class="nt">--autostart</span> <span class="nt">--noautoconsole</span>
</pre></table></code></div></div><h2 id="bigip-f5-virtual-edition"><span class="me-2">BIGIP F5 Virtual Edition</span><a href="#bigip-f5-virtual-edition" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Initial configuration:</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
</pre><td class="rouge-code"><pre><span class="c">#(root / default)</span>

tmsh modify sys global-settings mgmt-dhcp disabled
tmsh create sys management-ip 10.0.0.224/255.255.255.0
tmsh create sys management-route default gateway 10.0.0.1
<span class="c">#(or you can use "config" command - to speed it up)</span>

<span class="c">#DNS</span>
tmsh modify sys dns name-servers add <span class="s1">'{ 10.0.0.141 10.0.0.142 }'</span>
tmsh modify sys dns search add <span class="s1">'{ cloud.example.com }'</span>
<span class="c">#Hostname</span>
tmsh modify sys glob <span class="nb">hostname </span>lb01.cloud.example.com
<span class="c">#NTP</span>
tmsh modify sys ntp servers add <span class="s1">'{ 0.rhel.pool.ntp.org 1.rhel.pool.ntp.org }'</span>
tmsh modify sys ntp timezone <span class="s2">"UTC"</span>
<span class="c">#Session timeout</span>
tmsh modify sys sshd inactivity-timeout 120000
tmsh modify sys http auth-pam-idle-timeout 120000
<span class="c">#SNMP allow from "all"</span>
tmsh modify sys snmp allowed-addresses add <span class="s1">'{ 10.0.0.0/8 }'</span>
<span class="c">#SNMP traps</span>
tmsh modify /sys snmp traps add <span class="s1">'{ my_trap_destination { host monitor.cloud.example.com community public version 2c } }'</span>
<span class="c"># Network configuration...</span>
tmsh create net vlan External interfaces add <span class="s1">'{ 1.2 }'</span>
tmsh create net vlan Internal interfaces add <span class="s1">'{ 1.1 }'</span>
<span class="c">#SMTP</span>
tmsh create sys smtp-server yum.cloud.example.com <span class="s1">'{ from-address root@lb01.cloud.example.com local-host-name lb01.cloud.example.com smtp-server-host-name yum.cloud.example.com }'</span>
tmsh create net self 10.0.0.224/24 vlan Internal allow-service all
tmsh create net self 10.0.1.224/24 vlan External allow-service all
<span class="c">#https://support.f5.com/kb/en-us/solutions/public/13000/100/sol13180.html</span>
tmsh modify /sys outbound-smtp mailhub yum.cloud.example.com:25
<span class="c">#Send email when there are some problems with monitoring nodes "up/down"</span>
<span class="nb">cat</span> <span class="o">&gt;</span> /config/user_alert.conf <span class="o">&lt;&lt;</span> <span class="no">EOF</span><span class="sh">
alert Monitor_Status "monitor status" {
        email toaddress="petr.ruzicka@example.com"
        fromaddress="root"
        body="Check the Server status: https://10.0.0.224"
}
</span><span class="no">EOF

</span><span class="nb">echo</span> <span class="s1">'ssh-dss AX.... ....UQ= admin'</span> <span class="o">&gt;&gt;</span> /root/.ssh/authorized_keys

<span class="nb">cat</span> <span class="o">&gt;</span> /root/.ssh/id_dsa <span class="o">&lt;&lt;</span> <span class="no">EOF</span><span class="sh">
-----BEGIN DSA PRIVATE KEY-----
...
...
-----END DSA PRIVATE KEY-----
</span><span class="no">EOF

</span>tmsh modify auth password admin <span class="c"># my_secret_password</span>
tmsh modify auth user admin shell bash
<span class="nb">mkdir</span> /home/admin/.ssh <span class="o">&amp;&amp;</span> <span class="nb">chmod </span>700 /home/admin/.ssh
<span class="nb">cp</span> <span class="nt">-L</span> /root/.ssh/authorized_keys /home/admin/.ssh/
tmsh modify auth password root <span class="c"># my_secret_password2</span>

tmsh <span class="nb">install</span> /sys license registration-key ZXXXX-XXXXX-XXXXX-XXXXX-XXXXXXL

curl http://10.0.0.141/Hotfix-BIGIP-11.6.0.1.0.403-HF1.iso <span class="o">&gt;</span> /shared/images/Hotfix-BIGIP-11.6.0.1.0.403-HF1.iso
scp 10.0.0.226:/var/tmp/BIGIP-11.6.0.0.0.401.iso /shared/images/

tmsh <span class="nb">install </span>sys software image BIGIP-11.6.0.0.0.401.iso volume HD1.2

tmsh <span class="nb">install </span>sys software hotfix Hotfix-BIGIP-11.6.0.1.0.403-HF1.iso volume HD1.2
tmsh show sys software status
tmsh reboot volume HD1.2
mount <span class="nt">-o</span> rw,remount /usr
rpm <span class="nt">-Uvh</span> <span class="nt">--nodeps</span> <span class="se">\</span>
  http://vault.centos.org/5.8/os/i386/CentOS/yum-3.2.22-39.el5.centos.noarch.rpm <span class="se">\</span>
  http://vault.centos.org/5.8/os/i386/CentOS/python-elementtree-1.2.6-5.i386.rpm <span class="se">\</span>
  http://vault.centos.org/5.8/os/i386/CentOS/python-iniparse-0.2.3-4.el5.noarch.rpm <span class="se">\</span>
  http://vault.centos.org/5.8/os/i386/CentOS/python-sqlite-1.1.7-1.2.1.i386.rpm <span class="se">\</span>
  http://vault.centos.org/5.8/updates/i386/RPMS/rpm-python-4.4.2.3-28.el5_8.i386.rpm <span class="se">\</span>
  http://vault.centos.org/5.8/os/i386/CentOS/python-urlgrabber-3.1.0-6.el5.noarch.rpm <span class="se">\</span>
  http://vault.centos.org/5.8/os/i386/CentOS/yum-fastestmirror-1.1.16-21.el5.centos.noarch.rpm <span class="se">\</span>
  http://vault.centos.org/5.8/os/i386/CentOS/yum-metadata-parser-1.1.2-3.el5.centos.i386.rpm

<span class="nb">cat</span> <span class="o">&gt;</span> /etc/yum.repos.d/CentOS-Base.repo <span class="o">&lt;&lt;</span> <span class="sh">\</span><span class="no">EOF</span><span class="sh">
[base]
name=CentOS-5 - Base
baseurl=http://mirror.centos.org/centos/5/os/i386/
gpgcheck=0

[updates]
name=CentOS-5 - Updates
baseurl=http://mirror.centos.org/centos/5/updates/i386/
gpgcheck=0
</span><span class="no">EOF

</span>yum <span class="nb">install</span> <span class="nt">-y</span> mc screen

<span class="nb">cat</span> <span class="o">&gt;&gt;</span> /etc/screenrc <span class="o">&lt;&lt;</span> <span class="no">EOF</span><span class="sh">
defscrollback 10000
startup_message off
termcapinfo xterm ti@:te@
hardstatus alwayslastline '%{= kG}[ %{G}%H %{g}][%= %{= kw}%?%-Lw%?%{r}(%{W}%n*%f%t%?(%u)%?%{r})%{w}%?%+Lw%?%?%= %{g}][%{B} %d/%m %{W}%c %{g}]'
vbell off
</span><span class="no">EOF

</span><span class="nb">mkdir</span> <span class="nt">-p</span> /etc/skel/.mc/
<span class="nb">chmod </span>700 /etc/skel/.mc

<span class="nb">cat</span> <span class="o">&gt;</span> /etc/skel/.mc/ini <span class="o">&lt;&lt;</span> <span class="no">EOF</span><span class="sh">
[Midnight-Commander]
auto_save_setup=0
drop_menus=1
use_internal_edit=1
confirm_exit=0

[Layout]
menubar_visible=0
message_visible=0
</span><span class="no">EOF

</span><span class="nb">cp</span> <span class="nt">-r</span> /etc/skel/.mc /root/
<span class="nb">sed</span> <span class="nt">-i</span>.orig <span class="s1">'s/mc-wrapper.sh/mc-wrapper.sh --nomouse/'</span> /etc/profile.d/mc.sh

<span class="c">#Disable the GUI Wizard</span>
tmsh modify sys global-settings gui-setup disabled

<span class="c">#SSL certificate</span>
<span class="nv">SUBJ</span><span class="o">=</span><span class="s2">"
C=CZ
ST=Czech Republic
O=Example, Inc.
localityName=Brno
commonName=cloud.example.com Certificate Authority
"</span>
openssl req <span class="nt">-x509</span> <span class="nt">-nodes</span> <span class="nt">-subj</span> <span class="s2">"</span><span class="si">$(</span><span class="nb">echo</span> <span class="nt">-n</span> <span class="s2">"</span><span class="nv">$SUBJ</span><span class="s2">"</span> | <span class="nb">tr</span> <span class="s2">"</span><span class="se">\n</span><span class="s2">"</span> <span class="s2">"/"</span><span class="si">)</span><span class="s2">"</span> <span class="nt">-newkey</span> rsa:2048 <span class="nt">-keyout</span> /config/ssl/ssl.key/cloud.example.com_self-signed_2014.key <span class="nt">-out</span> /config/ssl/ssl.crt/cloud.example.com_self-signed_2014.crt <span class="nt">-days</span> 3650

tmsh <span class="nb">install</span> /sys crypto key cloud.example.com_self-signed_2014.key from-local-file /config/ssl/ssl.key/cloud.example.com_self-signed_2014.key
tmsh <span class="nb">install</span> /sys crypto cert cloud.example.com_self-signed_2014.crt from-local-file /config/ssl/ssl.crt/cloud.example.com_self-signed_2014.crt
</pre></table></code></div></div><h3 id="dns-vip-iapp"><span class="me-2">DNS VIP iApp</span><a href="#dns-vip-iapp" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
</pre><td class="rouge-code"><pre>tmsh create sys application service dns-ext-vip1_53 <span class="s1">'{ \
    description "DNS VIP - External - NS1 53" \
    strict-updates disabled \
    tables add { \
        vs_pool__members { \
            column-names { addr port conn_limit } \
            rows { \
                { row { 10.0.1.10 53 0 } } \
                { row { 10.0.1.20 53 0 } } \
            } \
        } \
    } \
    template f5.dns \
    variables add { \
        app_health__frequency { value 30 } \
        app_health__monitor { value \"/#create_new#\" } \
        app_health__record_type { value a } \
        app_health__recv { value \"\" } \
        vs_pool__pool_to_use { value \"/#create_new#\" } \
        app_health__send { value ns1.cloud.example.com } \
        vs_pool__vs_addr { value 10.0.1.16 } \
        vs_pool__vs_port { value 53 } \
    } \
}'</span>

tmsh modify ltm virtual dns-ext-vip1_53.app/dns-ext-vip1_53_dns_tcp description <span class="s2">"DNS VIP - External - NS1 TCP 53"</span>
tmsh modify ltm virtual dns-ext-vip1_53.app/dns-ext-vip1_53_dns_udp description <span class="s2">"DNS VIP - External - NS1 UDP 53"</span>
tmsh modify ltm pool dns-ext-vip1_53.app/dns-ext-vip1_53_tcp_pool description <span class="s2">"DNS VIP - External - NS1 TCP 53"</span> members modify <span class="s1">'{ 10.0.1.10:domain { description "Public DNS Master" } 10.0.1.20:domain { description "Public DNS Slave" } }'</span>
tmsh modify ltm pool dns-ext-vip1_53.app/dns-ext-vip1_53_udp_pool description <span class="s2">"DNS VIP - External - NS1 UDP 53"</span> members modify <span class="s1">'{ 10.0.1.10:domain { description "Public DNS Master" } 10.0.1.20:domain { description "Public DNS Slave" } }'</span>

tmsh create sys application service dns-ext-vip2_53 <span class="s1">'{ \
    description "DNS VIP - External - NS2 53" \
    strict-updates disabled \
    tables add { \
        vs_pool__members { \
            column-names { addr port conn_limit } \
            rows { \
                { row { 10.0.1.10 53 0 } } \
                { row { 10.0.1.20 53 0 } } \
            } \
        } \
    } \
    template f5.dns \
    variables add { \
        app_health__frequency { value 30 } \
        app_health__monitor { value \"/#create_new#\" } \
        app_health__record_type { value a } \
        app_health__recv { value \"\" } \
        vs_pool__pool_to_use { value \"/#create_new#\" } \
        app_health__send { value ns2.cloud.example.com } \
        vs_pool__vs_addr { value 10.0.1.17 } \
        vs_pool__vs_port { value 53 } \
    } \
}'</span>

tmsh modify ltm virtual dns-ext-vip2_53.app/dns-ext-vip2_53_dns_tcp description <span class="s2">"DNS VIP - External - NS2 TCP 53"</span>
tmsh modify ltm virtual dns-ext-vip2_53.app/dns-ext-vip2_53_dns_udp description <span class="s2">"DNS VIP - External - NS2 UDP 53"</span>
tmsh modify ltm pool dns-ext-vip2_53.app/dns-ext-vip2_53_tcp_pool description <span class="s2">"DNS VIP - External - NS2 TCP 53"</span> members modify <span class="s1">'{ 10.0.1.10:domain { description "Public DNS Master" } 10.0.1.20:domain { description "Public DNS Slave" } }'</span>
tmsh modify ltm pool dns-ext-vip2_53.app/dns-ext-vip2_53_udp_pool description <span class="s2">"DNS VIP - External - NS2 UDP 53"</span> members modify <span class="s1">'{ 10.0.1.10:domain { description "Public DNS Master" } 10.0.1.20:domain { description "Public DNS Slave" } }'</span>
tmsh modify ltm node 10.0.1.10 description <span class="s2">"Public DNS Master"</span>
tmsh modify ltm node 10.0.1.20 description <span class="s2">"Public DNS Slave"</span>
</pre></table></code></div></div><h3 id="ldap-vip-iapp"><span class="me-2">LDAP VIP iApp</span><a href="#ldap-vip-iapp" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
</pre><td class="rouge-code"><pre>tmsh create sys application service ds-vip_389 <span class="s1">'{ \
    description "Directory Server VIP 389" \
    strict-updates disabled \
    lists add { irules__irules { } } \
    tables add { \
        vs_pool__pool_members { \
            column-names { addr port conn_limit } \
            rows { \
                { row { 10.0.0.150 389 0 } } \
                { row { 10.0.0.151 389 0 } } \
            } \
        } \
    } \
    template f5.ldap \
    variables add { \
        app_health__account { value "cn=directory manager,o=cloud.example.com" } \
        app_health__frequency { value 30 } \
        app_health__monitor { value \"/#create_new#\" } \
        app_health__monitor_password { value my_ldap_password } \
        app_health__search_level { value o=cloud.example.com } \
        app_health__search_query { value dc=test } \
        client_opt__tcp_opt { value \"/#lan#\" } \
        server_opt__tcp_opt { value \"/#lan#\" } \
        ssl_encryption_questions__advanced_mode { value yes } \
        vs_pool__bigip_route { value yes } \
        vs_pool__lb_method { value least-connections-member } \
        vs_pool__persistence { value \"/#default#\" } \
        vs_pool__pool_to_use { value \"/#create_new#\" } \
        vs_pool__vs_addr { value 10.0.0.203 } \
        vs_pool__vs_port { value 389 } \
    } \
}'</span>

tmsh modify ltm virtual ds-vip_389.app/ds-vip_389_vs description <span class="s2">"Directory Server VIP 389 tcp"</span>

tmsh modify ltm pool ds-vip_389.app/ds-vip_389_pool description <span class="s2">"Directory Server VIP 389"</span> members modify <span class="s1">'{ 10.0.0.150:ldap { description "Directory server - primary" } 10.0.0.151:ldap { description "Directory server - secondary" } }'</span>

tmsh modify ltm node 10.0.0.150 description <span class="s2">"Directory server - primary"</span>
tmsh modify ltm node 10.0.0.151 description <span class="s2">"Directory server - secondary"</span>
</pre></table></code></div></div><h3 id="https-vip-iapp"><span class="me-2">HTTPS VIP iApp</span><a href="#https-vip-iapp" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
</pre><td class="rouge-code"><pre>tmsh create sys application service https-vip_443 <span class="s1">'{ \
    description "HTTPS Server VIP 443" \
    strict-updates disabled \
    tables add { \
        pool__hosts { \
            column-names { name } \
            rows { { row { config.cloud.example.com } } } \
        } \
        pool__members { \
            column-names { addr port_secure connection_limit } \
            rows { \
                { row { 10.0.1.140 443 0 } } \
                { row { 10.0.1.150 443 0 } } \
            } \
        } \
    } \
    template f5.http \
    variables add { \
        client__http_compression { value \"/#create_new#\" } \
        monitor__monitor { value \"/#create_new#\" } \
        monitor__response { value \"\" } \
        monitor__uri { value / } \
        net__client_mode { value wan } \
        net__server_mode { value lan } \
        pool__addr { value 10.0.1.94 } \
        pool__pool_to_use { value \"/#create_new#\" } \
        pool__port_secure { value 443 } \
        pool__port { value 443 } \
        ssl__mode { value client_ssl } \
        ssl__server_ssl_profile { value \"/#default#\" } \
        ssl__cert { value /Common/cloud.example.com_self-signed_2014.crt } \
        ssl__client_ssl_profile { value \"/#create_new#\" } \
        ssl__key { value /Common/cloud.example.com_self-signed_2014.key } \
    } \
}'</span>

tmsh modify ltm virtual https-vip_443.app/https-vip_443_vs description <span class="s2">"HTTPS Server VIP"</span>
tmsh modify ltm pool https-vip_443.app/https-vip_443_pool description <span class="s2">"HTTPS Server VIP 443"</span> members modify <span class="s1">'{ 10.0.1.140:http { description "HTTPS Server 01" } 10.0.1.150:http { description "HTTPS Server 02" } }'</span>
tmsh modify ltm node 10.0.1.140 description <span class="s2">"HTTPS Server 01"</span>
tmsh modify ltm node 10.0.1.150 description <span class="s2">"HTTPS Server 02"</span>
</pre></table></code></div></div><p>That’s all. I hope it will save some time.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw me-1"></i> <a href="/categories/virtualization/">Virtualization</a>, <a href="/categories/networking/">Networking</a>, <a href="/categories/linux-xvx-cz/">linux.xvx.cz</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw me-1"></i> <a href="/tags/load-balancer/" class="post-tag no-text-decoration" >load-balancer</a> <a href="/tags/rhel/" class="post-tag no-text-decoration" >rhel</a></div><div class=" post-tail-bottom d-flex justify-content-between align-items-center mt-5 pb-2 " ><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper d-flex align-items-center"> <span class="share-label text-muted">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Installation%20F5%20BIGIP%20Virtual%20Edition%20to%20RHEL7%20-%20Petr's%20Blog&url=https%3A%2F%2Fruzickap.github.io%2Fposts%2Finstalltion-f5-bigip-virtual-edition-to-rhel7%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Twitter" aria-label="Twitter"> <i class="fa-fw fa-brands fa-square-x-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Installation%20F5%20BIGIP%20Virtual%20Edition%20to%20RHEL7%20-%20Petr's%20Blog&u=https%3A%2F%2Fruzickap.github.io%2Fposts%2Finstalltion-f5-bigip-virtual-edition-to-rhel7%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Facebook" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fruzickap.github.io%2Fposts%2Finstalltion-f5-bigip-virtual-edition-to-rhel7%2F" target="_blank" rel="noopener" data-bs-toggle="tooltip" data-bs-placement="top" title="Linkedin" aria-label="Linkedin"> <i class="fa-fw fab fa-linkedin"></i> </a> <script defer type="module" src="https://cdn.jsdelivr.net/npm/@justinribeiro/share-to-mastodon/+esm"></script> <button class="btn text-start" data-bs-toggle="tooltip" data-bs-placement="top" title="Mastodon" aria-label="Mastodon"> <share-to-mastodon class="share-mastodon" message="Installation%20F5%20BIGIP%20Virtual%20Edition%20to%20RHEL7%20-%20Petr's%20Blog" url="https%3A%2F%2Fruzickap.github.io%2Fposts%2Finstalltion-f5-bigip-virtual-edition-to-rhel7%2F"customInstanceList="[{&quot;label&quot;:&quot;mastodon.social&quot;,&quot;link&quot;:&quot;https://mastodon.social/&quot;},{&quot;label&quot;:&quot;mastodon.online&quot;,&quot;link&quot;:&quot;https://mastodon.online/&quot;},{&quot;label&quot;:&quot;fosstodon.org&quot;,&quot;link&quot;:&quot;https://fosstodon.org/&quot;},{&quot;label&quot;:&quot;photog.social&quot;,&quot;link&quot;:&quot;https://photog.social/&quot;}]" > <i class="fa-fw fa-brands fa-mastodon"></i> </share-to-mastodon> </button> <button id="copy-link" aria-label="Copy link" class="btn small" data-bs-toggle="tooltip" data-bs-placement="top" title="Copy link" data-title-succeed="Link copied successfully!" > <i class="fa-fw fas fa-link pe-none fs-6"></i> </button> </span></div></div></div></article></main><aside aria-label="Panel" id="panel-wrapper" class="col-xl-3 ps-2 text-muted"><div class="access"><section id="access-lastmod"><h2 class="panel-heading">Recently Updated</h2><ul class="content list-unstyled ps-0 pb-1 ms-1 mt-2"><li class="text-truncate lh-lg"> <a href="/posts/installtion-f5-bigip-virtual-edition-to-rhel7/">Installation F5 BIGIP Virtual Edition to RHEL7</a><li class="text-truncate lh-lg"> <a href="/posts/detect-a-hacker-attacks-eks-vm/">Detect the hacker attacks on Amazon EKS and EC2 instances</a><li class="text-truncate lh-lg"> <a href="/posts/secure-cheap-amazon-eks-auto/">Build secure and cheap Amazon EKS Auto Mode</a><li class="text-truncate lh-lg"> <a href="/posts/eks-auto-cert-manager-velero/">Amazon EKS Auto Mode with cert-manager and Velero</a><li class="text-truncate lh-lg"> <a href="/posts/mcp-servers-k8s/">MCP Servers running on Kubernetes</a></ul></section><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/kubernetes/">kubernetes</a> <a class="post-tag btn btn-outline-primary" href="/tags/amazon-eks/">amazon-eks</a> <a class="post-tag btn btn-outline-primary" href="/tags/security/">security</a> <a class="post-tag btn btn-outline-primary" href="/tags/cert-manager/">cert-manager</a> <a class="post-tag btn btn-outline-primary" href="/tags/eksctl/">eksctl</a> <a class="post-tag btn btn-outline-primary" href="/tags/bash/">bash</a> <a class="post-tag btn btn-outline-primary" href="/tags/pxe/">pxe</a> <a class="post-tag btn btn-outline-primary" href="/tags/wifi/">wifi</a> <a class="post-tag btn btn-outline-primary" href="/tags/prometheus/">prometheus</a> <a class="post-tag btn btn-outline-primary" href="/tags/automation/">automation</a></div></section></div><div class="toc-border-cover z-3"></div><section id="toc-wrapper" class="invisible position-sticky ps-0 pe-4 pb-4"><h2 class="panel-heading ps-3 pb-2 mb-0">Contents</h2><nav id="toc"></nav></section></aside></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-md-4"><aside id="related-posts" aria-labelledby="related-label"><h3 class="mb-4" id="related-label">Further Reading</h3><nav class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 mb-4"><article class="col"> <a href="/posts/update-offline-centos-rhel-server/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1296601200" data-df="ll" > Feb 2, 2011 </time><h4 class="pt-0 my-2">Update offline CentOS-RHEL server</h4><div class="text-muted"><p>Update an offline CentOS/RHEL server by downloading RPM packages on a connected machine using yum-downloadonly</p></div></div></a></article><article class="col"> <a href="/posts/nvidia-proprietary-drivers-and-rhel6/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1295478000" data-df="ll" > Jan 20, 2011 </time><h4 class="pt-0 my-2">Nvidia proprietary drivers and RHEL6</h4><div class="text-muted"><p>Install Nvidia proprietary GPU drivers on RHEL 6 by blacklisting the nouveau driver</p></div></div></a></article><article class="col"> <a href="/posts/ipa-centos7-integration-with-active-directory-w2k8/" class="post-preview card h-100"><div class="card-body"> <time data-ts="1437429600" data-df="ll" > Jul 21, 2015 </time><h4 class="pt-0 my-2">IPA (CentOS7) integration with Active Directory (W2K8)</h4><div class="text-muted"><p>IPA (CentOS7) integration with Active Directory (W2K8)</p></div></div></a></article></nav></aside><nav class="post-navigation d-flex justify-content-between" aria-label="Post Navigation"> <a href="/posts/loadbalancing-of-postgresql-databases-using-pgpool-ii-and-repmgr/" class="btn btn-outline-primary" aria-label="Older" ><p>Loadbalancing of PostgreSQL databases using pgpool-II and repmgr</p></a> <a href="/posts/ipa-centos7-integration-with-active-directory-w2k8/" class="btn btn-outline-primary" aria-label="Newer" ><p>IPA (CentOS7) integration with Active Directory (W2K8)</p></a></nav><footer aria-label="Site Info" class=" d-flex flex-column justify-content-center text-muted flex-lg-row justify-content-lg-between align-items-lg-center pb-lg-3 " ><p>© <time>2026</time> <a href="https://twitter.com/Ruzicka_Petr">Petr Ruzicka</a>. <span data-bs-toggle="tooltip" data-bs-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author." >Some rights reserved.</span></p><p>Using the <a data-bs-toggle="tooltip" data-bs-placement="top" title="v7.4.1" href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener" >Chirpy</a> theme for <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a>.</p></footer></div></div><div id="search-result-wrapper" class="d-flex justify-content-center d-none"><div class="col-11 content"><div id="search-hints"><section><h2 class="panel-heading">Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"> <a class="post-tag btn btn-outline-primary" href="/tags/kubernetes/">kubernetes</a> <a class="post-tag btn btn-outline-primary" href="/tags/amazon-eks/">amazon-eks</a> <a class="post-tag btn btn-outline-primary" href="/tags/security/">security</a> <a class="post-tag btn btn-outline-primary" href="/tags/cert-manager/">cert-manager</a> <a class="post-tag btn btn-outline-primary" href="/tags/eksctl/">eksctl</a> <a class="post-tag btn btn-outline-primary" href="/tags/bash/">bash</a> <a class="post-tag btn btn-outline-primary" href="/tags/pxe/">pxe</a> <a class="post-tag btn btn-outline-primary" href="/tags/wifi/">wifi</a> <a class="post-tag btn btn-outline-primary" href="/tags/prometheus/">prometheus</a> <a class="post-tag btn btn-outline-primary" href="/tags/automation/">automation</a></div></section></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><aside aria-label="Scroll to Top"> <button id="back-to-top" type="button" class="btn btn-lg btn-box-shadow"> <i class="fas fa-angle-up"></i> </button></aside></div><div id="mask" class="d-none position-fixed w-100 h-100 z-1"></div><aside id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-bs-animation="true" data-bs-autohide="false" ><div class="toast-header"> <button type="button" class="btn-close ms-auto" data-bs-dismiss="toast" aria-label="Close" ></button></div><div class="toast-body text-center pt-0"><p class="px-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></aside><script> (function () { const themeMapper = Theme.getThemeMapper('light', 'dark_dimmed'); const initTheme = themeMapper[Theme.visualState]; let lang = 'en';if (lang.length > 2 && !lang.startsWith('zh')) { lang = lang.slice(0, 2); } let giscusAttributes = { src: 'https://giscus.app/client.js', 'data-repo': 'ruzickap/ruzickap.github.io', 'data-repo-id': 'R_kgDOGkp4nQ', 'data-category': 'General', 'data-category-id': 'DIC_kwDOGkp4nc4CSdu1', 'data-mapping': 'pathname', 'data-strict' : '0', 'data-reactions-enabled': '1', 'data-emit-metadata': '0', 'data-theme': initTheme, 'data-input-position': 'bottom', 'data-lang': lang, 'data-loading': 'lazy', crossorigin: 'anonymous', async: '' }; let giscusNode = document.createElement('script'); Object.entries(giscusAttributes).forEach(([key, value]) => giscusNode.setAttribute(key, value) ); const $footer = document.querySelector('footer'); $footer.insertAdjacentElement("beforebegin", giscusNode); addEventListener('message', (event) => { if (event.source === window && event.data && event.data.id === Theme.ID) { const newTheme = themeMapper[Theme.visualState]; const message = { setConfig: { theme: newTheme } }; const giscus = document.getElementsByClassName('giscus-frame')[0].contentWindow; giscus.postMessage({ giscus: message }, 'https://giscus.app'); } }); })(); </script> <script> document.addEventListener('DOMContentLoaded', () => { SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<article class="px-1 px-sm-2 px-lg-4 px-xl-0"><header><h2><a href="{url}">{title}</a></h2><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div></header><p>{content}</p></article>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); }); </script>
